import{q as D}from"./xY4BzElm.js";import{_ as W}from"./D9Z9MdNV.js";const S=[...` 	
\r\fÂ \v\uFEFF`];function H(r,e,t){var i=r==null?"":""+r;if(e&&(i=i?i+" "+e:e),t){for(var s in t)if(t[s])i=i?i+" "+s:s;else if(i.length)for(var n=s.length,a=0;(a=i.indexOf(s,a))>=0;){var o=a+n;(a===0||S.includes(i[a-1]))&&(o===i.length||S.includes(i[o]))?i=(a===0?"":i.substring(0,a))+i.substring(o+1):a=o}}return i===""?null:i}function ae(r,e,t,i,s,n){var a=r.__className;if(D||a!==t||a===void 0){var o=H(t,i,n);(!D||o!==r.getAttribute("class"))&&(o==null?r.removeAttribute("class"):r.className=o),r.__className=t}else if(n&&s!==n)for(var d in n){var h=!!n[d];(s==null||h!==!!s[d])&&r.classList.toggle(d,h)}return n}/*! Capacitor: https://capacitorjs.com/ - MIT License */var T;(function(r){r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE"})(T||(T={}));class M extends Error{constructor(e,t,i){super(e),this.message=e,this.code=t,this.data=i}}const G=r=>{var e,t;return r?.androidBridge?"android":!((t=(e=r?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},F=r=>{const e=r.CapacitorCustomPlatform||null,t=r.Capacitor||{},i=t.Plugins=t.Plugins||{},s=()=>e!==null?e.name:G(r),n=()=>s()!=="web",a=c=>{const l=h.get(c);return!!(l?.platforms.has(s())||o(c))},o=c=>{var l;return(l=t.PluginHeaders)===null||l===void 0?void 0:l.find(C=>C.name===c)},d=c=>r.console.error(c),h=new Map,P=(c,l={})=>{const C=h.get(c);if(C)return console.warn(`Capacitor plugin "${c}" already registered. Cannot register plugins twice.`),C.proxy;const b=s(),L=o(c);let v;const _=async()=>(!v&&b in l?v=typeof l[b]=="function"?v=await l[b]():v=l[b]:e!==null&&!v&&"web"in l&&(v=typeof l.web=="function"?v=await l.web():v=l.web),v),z=(u,w)=>{var g,p;if(L){const y=L?.methods.find(m=>w===m.name);if(y)return y.rtype==="promise"?m=>t.nativePromise(c,w.toString(),m):(m,E)=>t.nativeCallback(c,w.toString(),m,E);if(u)return(g=u[w])===null||g===void 0?void 0:g.bind(u)}else{if(u)return(p=u[w])===null||p===void 0?void 0:p.bind(u);throw new M(`"${c}" plugin is not implemented on ${b}`,T.Unimplemented)}},k=u=>{let w;const g=(...p)=>{const y=_().then(m=>{const E=z(m,u);if(E){const A=E(...p);return w=A?.remove,A}else throw new M(`"${c}.${u}()" is not implemented on ${b}`,T.Unimplemented)});return u==="addListener"&&(y.remove=async()=>w()),y};return g.toString=()=>`${u.toString()}() { [capacitor code] }`,Object.defineProperty(g,"name",{value:u,writable:!1,configurable:!1}),g},U=k("addListener"),x=k("removeListener"),R=(u,w)=>{const g=U({eventName:u},w),p=async()=>{const m=await g;x({eventName:u,callbackId:m},w)},y=new Promise(m=>g.then(()=>m({remove:p})));return y.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await p()},y},I=new Proxy({},{get(u,w){switch(w){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return L?R:U;case"removeListener":return x;default:return k(w)}}});return i[c]=I,h.set(c,{name:c,proxy:I,platforms:new Set([...Object.keys(l),...L?[b]:[]])}),I};return t.convertFileSrc||(t.convertFileSrc=c=>c),t.getPlatform=s,t.handleError=d,t.isNativePlatform=n,t.isPluginAvailable=a,t.registerPlugin=P,t.Exception=M,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},q=r=>r.Capacitor=F(r),f=q(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),O=f.registerPlugin;class j{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(t);const n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n),i&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,t);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,i){const s=this.listeners[e];if(!s){if(i){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}return}s.forEach(n=>n(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:i=>{this.notifyListeners(t,i)}}}unimplemented(e="not implemented"){return new f.Exception(e,T.Unimplemented)}unavailable(e="not available"){return new f.Exception(e,T.Unavailable)}async removeListener(e,t){const i=this.listeners[e];if(!i)return;const s=i.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(i=>{this.notifyListeners(e,i)}))}}const V=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),$=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class B extends j{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[s,n]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=$(s).trim(),n=$(n).trim(),t[s]=n}),t}async setCookie(e){try{const t=V(e.key),i=V(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,n=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${i||""}${s}; path=${n}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}O("CapacitorCookies",{web:()=>new B});const J=async r=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{const s=i.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},i.onerror=s=>t(s),i.readAsDataURL(r)}),Q=(r={})=>{const e=Object.keys(r);return Object.keys(r).map(s=>s.toLocaleLowerCase()).reduce((s,n,a)=>(s[n]=r[e[a]],s),{})},X=(r,e=!0)=>r?Object.entries(r).reduce((i,s)=>{const[n,a]=s;let o,d;return Array.isArray(a)?(d="",a.forEach(h=>{o=e?encodeURIComponent(h):h,d+=`${n}=${o}&`}),d.slice(0,-1)):(o=e?encodeURIComponent(a):a,d=`${n}=${o}`),`${i}&${d}`},"").substr(1):null,Y=(r,e={})=>{const t=Object.assign({method:r.method||"GET",headers:r.headers},e),s=Q(r.headers)["content-type"]||"";if(typeof r.data=="string")t.body=r.data;else if(s.includes("application/x-www-form-urlencoded")){const n=new URLSearchParams;for(const[a,o]of Object.entries(r.data||{}))n.set(a,o);t.body=n.toString()}else if(s.includes("multipart/form-data")||r.data instanceof FormData){const n=new FormData;if(r.data instanceof FormData)r.data.forEach((o,d)=>{n.append(d,o)});else for(const o of Object.keys(r.data))n.append(o,r.data[o]);t.body=n;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(s.includes("application/json")||typeof r.data=="object")&&(t.body=JSON.stringify(r.data));return t};class Z extends j{async request(e){const t=Y(e,e.webFetchExtra),i=X(e.params,e.shouldEncodeUrlParams),s=i?`${e.url}?${i}`:e.url,n=await fetch(s,t),a=n.headers.get("content-type")||"";let{responseType:o="text"}=n.ok?e:{};a.includes("application/json")&&(o="json");let d,h;switch(o){case"arraybuffer":case"blob":h=await n.blob(),d=await J(h);break;case"json":d=await n.json();break;case"document":case"text":default:d=await n.text()}const P={};return n.headers.forEach((c,l)=>{P[l]=c}),{data:d,headers:P,status:n.status,url:n.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}O("CapacitorHttp",{web:()=>new Z});const N=O("Device",{web:()=>W(()=>import("./CI4HTVwK.js"),[],import.meta.url).then(r=>new r.DeviceWeb)});class K{static deviceInfo=null;static initialized=!1;static async initialize(){if(!this.initialized)try{f.isNativePlatform()&&(this.deviceInfo=await N.getInfo()),this.initialized=!0}catch(e){console.warn("Failed to initialize device detection:",e),this.initialized=!0}}static isTVModeForced(){return typeof window>"u"?!1:new URLSearchParams(window.location.search).get("tv")==="true"?!0:localStorage.getItem("tv_mode")==="true"}static async isAndroidTV(){if(await this.initialize(),this.isTVModeForced())return!0;if(!f.isNativePlatform()||f.getPlatform()!=="android")return!1;if(this.deviceInfo){const o=this.deviceInfo.model?.toLowerCase()||"",d=this.deviceInfo.manufacturer?.toLowerCase()||"",h=["nvidia","sony","philips","tcl","hisense","xiaomi"],P=["shield","bravia","androidtv","googletv","chromecast"];if(h.some(c=>d.includes(c))||P.some(c=>o.includes(c)))return!0}const e=navigator.userAgent.toLowerCase();if(["android tv","googletv","smarttv","smart-tv","television","settopbox","nexus player","adt-"].some(o=>e.includes(o)))return!0;const i=window.screen.width,s=window.screen.height,n=Math.sqrt(i*i+s*s),a=window.devicePixelRatio||1;return n>2e3&&a<=2}static async getUIMode(){if(await this.initialize(),f.getPlatform()==="android"){if(await this.isAndroidTV())return"television";const e=window.screen.width>window.screen.height,t=window.screen.width/window.screen.height;if(e&&t>2.5)return"car"}return"normal"}static async isLeanback(){return await this.getUIMode()==="television"||await this.isAndroidTV()}static async hasPhysicalKeyboard(){return await this.initialize(),f.getPlatform()==="web"?this.detectWebKeyboard():f.getPlatform()==="android"?await this.isAndroidTV()?await this.detectTVKeyboard():!1:f.getPlatform()==="ios"?await this.detectIOSKeyboard():!1}static async detectTVKeyboard(){try{if("bluetooth"in navigator)return!1}catch{}return new Promise(e=>{const t=setTimeout(()=>{i(),e(!1)},100),i=()=>{document.removeEventListener("keydown",s),clearTimeout(t)},s=n=>{n.key&&n.key.length===1&&!n.altKey&&!n.ctrlKey&&(i(),e(!0))};document.addEventListener("keydown",s)})}static detectWebKeyboard(){return!!(window.matchMedia&&window.matchMedia("(pointer: fine)").matches||!("ontouchstart"in window)&&!navigator.maxTouchPoints||window.matchMedia&&window.matchMedia("(hover: hover)").matches)}static async detectIOSKeyboard(){return this.deviceInfo?.model?.toLowerCase().includes("ipad"),!1}static async isTouchDevice(){return await this.initialize(),f.getPlatform()==="web"?"ontouchstart"in window||navigator.maxTouchPoints>0:f.getPlatform()==="android"?!await this.isAndroidTV():f.getPlatform()==="ios"}static supportsGamepad(){return"getGamepads"in navigator}static getConnectedGamepads(){if(!this.supportsGamepad())return[];const e=navigator.getGamepads();return Array.from(e).filter(t=>t!==null)}static async getScreenType(){if(await this.initialize(),await this.isAndroidTV())return"tv";const e=window.screen.width,t=window.screen.height,i=Math.max(e,t),s=Math.min(e,t);if(f.getPlatform()==="web"&&i>=1280)return"desktop";if(this.deviceInfo&&f.isNativePlatform()){const n=this.deviceInfo.model?.toLowerCase()||"";if(n.includes("tablet")||n.includes("ipad"))return"tablet";const a=window.devicePixelRatio||1,o=e/a,d=t/a;if(Math.max(o,d)>=900)return"tablet"}return i>=1024&&s>=768?"tablet":"mobile"}static async getInputMethods(){const e=[];return await this.isTouchDevice()&&e.push("touch"),await this.hasPhysicalKeyboard()?e.push("keyboard"):e.push("virtual-keyboard"),window.matchMedia&&window.matchMedia("(pointer: fine)").matches&&e.push("mouse"),await this.isAndroidTV()&&(e.push("dpad"),e.push("remote")),this.supportsGamepad()&&this.getConnectedGamepads().length>0&&e.push("gamepad"),e}static async getAdvancedDeviceInfo(){await this.initialize();const e=await this.isAndroidTV(),t=await this.hasPhysicalKeyboard(),i=await this.isTouchDevice(),s=await this.getScreenType(),n=await this.getInputMethods(),a=await this.getUIMode(),o=await this.isLeanback(),d=e||o||(s==="tv"||s==="desktop")&&(n.includes("dpad")||n.includes("remote")||!i&&n.includes("gamepad"));return{isTV:e,hasPhysicalKeyboard:t,isTouchDevice:i,screenType:s,inputMethods:n,deviceInfo:this.deviceInfo,uiMode:a,isLeanback:o,hasHardwareKeyboard:t,supportsGamepad:this.supportsGamepad(),shouldUseTVUI:d}}static async shouldUseTVUI(){await this.initialize();const e=await this.isAndroidTV(),t=await this.isLeanback();if(e||t)return!0;const i=await this.getScreenType(),s=await this.getInputMethods(),n=await this.isTouchDevice();return!!((i==="tv"||i==="desktop")&&(s.includes("dpad")||s.includes("remote")||!n&&s.includes("gamepad")))}}const ee=()=>K.isAndroidTV(),te=()=>{typeof window<"u"&&(localStorage.setItem("tv_mode","true"),window.location.reload())},ie=()=>{typeof window<"u"&&(localStorage.removeItem("tv_mode"),window.location.reload())},ne=()=>typeof window>"u"?!1:new URLSearchParams(window.location.search).get("tv")==="true"||localStorage.getItem("tv_mode")==="true",oe=Object.freeze(Object.defineProperty({__proto__:null,AdvancedDeviceDetector:K,disableTVMode:ie,enableTVMode:te,isAndroidTV:ee,isTVModeEnabled:ne},Symbol.toStringTag,{value:"Module"}));export{j as W,ee as a,oe as b,ie as d,te as e,ne as i,ae as s};

import{q as D}from"./CBnVU58R.js";import{_ as z}from"./D9Z9MdNV.js";function _(i){var e,t,s="";if(typeof i=="string"||typeof i=="number")s+=i;else if(typeof i=="object")if(Array.isArray(i)){var n=i.length;for(e=0;e<n;e++)i[e]&&(t=_(i[e]))&&(s&&(s+=" "),s+=t)}else for(t in i)i[t]&&(s&&(s+=" "),s+=t);return s}function H(){for(var i,e,t=0,s="",n=arguments.length;t<n;t++)(i=arguments[t])&&(e=_(i))&&(s&&(s+=" "),s+=e);return s}function se(i){return typeof i=="object"?H(i):i??""}function R(i,e,t){var s=i==null?"":""+i;return s===""?null:s}function re(i,e,t,s,n,r){var o=i.__className;if(D||o!==t||o===void 0){var a=R(t);(!D||a!==i.getAttribute("class"))&&(a==null?i.removeAttribute("class"):i.className=a),i.__className=t}return r}/*! Capacitor: https://capacitorjs.com/ - MIT License */var k;(function(i){i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE"})(k||(k={}));class I extends Error{constructor(e,t,s){super(e),this.message=e,this.code=t,this.data=s}}const G=i=>{var e,t;return i?.androidBridge?"android":!((t=(e=i?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},q=i=>{const e=i.CapacitorCustomPlatform||null,t=i.Capacitor||{},s=t.Plugins=t.Plugins||{},n=()=>e!==null?e.name:G(i),r=()=>n()!=="web",o=c=>{const l=w.get(c);return!!(l?.platforms.has(n())||a(c))},a=c=>{var l;return(l=t.PluginHeaders)===null||l===void 0?void 0:l.find(T=>T.name===c)},d=c=>i.console.error(c),w=new Map,P=(c,l={})=>{const T=w.get(c);if(T)return console.warn(`Capacitor plugin "${c}" already registered. Cannot register plugins twice.`),T.proxy;const b=n(),L=a(c);let p;const V=async()=>(!p&&b in l?p=typeof l[b]=="function"?p=await l[b]():p=l[b]:e!==null&&!p&&"web"in l&&(p=typeof l.web=="function"?p=await l.web():p=l.web),p),S=(u,f)=>{var g,y;if(L){const v=L?.methods.find(m=>f===m.name);if(v)return v.rtype==="promise"?m=>t.nativePromise(c,f.toString(),m):(m,A)=>t.nativeCallback(c,f.toString(),m,A);if(u)return(g=u[f])===null||g===void 0?void 0:g.bind(u)}else{if(u)return(y=u[f])===null||y===void 0?void 0:y.bind(u);throw new I(`"${c}" plugin is not implemented on ${b}`,k.Unimplemented)}},E=u=>{let f;const g=(...y)=>{const v=V().then(m=>{const A=S(m,u);if(A){const C=A(...y);return f=C?.remove,C}else throw new I(`"${c}.${u}()" is not implemented on ${b}`,k.Unimplemented)});return u==="addListener"&&(v.remove=async()=>f()),v};return g.toString=()=>`${u.toString()}() { [capacitor code] }`,Object.defineProperty(g,"name",{value:u,writable:!1,configurable:!1}),g},M=E("addListener"),O=E("removeListener"),W=(u,f)=>{const g=M({eventName:u},f),y=async()=>{const m=await g;O({eventName:u,callbackId:m},f)},v=new Promise(m=>g.then(()=>m({remove:y})));return v.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await y()},v},x=new Proxy({},{get(u,f){switch(f){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return L?W:M;case"removeListener":return O;default:return E(f)}}});return s[c]=x,w.set(c,{name:c,proxy:x,platforms:new Set([...Object.keys(l),...L?[b]:[]])}),x};return t.convertFileSrc||(t.convertFileSrc=c=>c),t.getPlatform=n,t.handleError=d,t.isNativePlatform=r,t.isPluginAvailable=o,t.registerPlugin=P,t.Exception=I,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},F=i=>i.Capacitor=q(i),h=F(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),U=h.registerPlugin;class K{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),s&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,t);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,s){const n=this.listeners[e];if(!n){if(s){let r=this.retainedEventArguments[e];r||(r=[]),r.push(t),this.retainedEventArguments[e]=r}return}n.forEach(r=>r(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:s=>{this.notifyListeners(t,s)}}}unimplemented(e="not implemented"){return new h.Exception(e,k.Unimplemented)}unavailable(e="not available"){return new h.Exception(e,k.Unavailable)}async removeListener(e,t){const s=this.listeners[e];if(!s)return;const n=s.indexOf(t);this.listeners[e].splice(n,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(s=>{this.notifyListeners(e,s)}))}}const $=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),j=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class B extends K{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(s=>{if(s.length<=0)return;let[n,r]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=j(n).trim(),r=j(r).trim(),t[n]=r}),t}async setCookie(e){try{const t=$(e.key),s=$(e.value),n=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${s||""}${n}; path=${r}; ${o};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}U("CapacitorCookies",{web:()=>new B});const J=async i=>new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{const n=s.result;e(n.indexOf(",")>=0?n.split(",")[1]:n)},s.onerror=n=>t(n),s.readAsDataURL(i)}),Q=(i={})=>{const e=Object.keys(i);return Object.keys(i).map(n=>n.toLocaleLowerCase()).reduce((n,r,o)=>(n[r]=i[e[o]],n),{})},X=(i,e=!0)=>i?Object.entries(i).reduce((s,n)=>{const[r,o]=n;let a,d;return Array.isArray(o)?(d="",o.forEach(w=>{a=e?encodeURIComponent(w):w,d+=`${r}=${a}&`}),d.slice(0,-1)):(a=e?encodeURIComponent(o):o,d=`${r}=${a}`),`${s}&${d}`},"").substr(1):null,Y=(i,e={})=>{const t=Object.assign({method:i.method||"GET",headers:i.headers},e),n=Q(i.headers)["content-type"]||"";if(typeof i.data=="string")t.body=i.data;else if(n.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[o,a]of Object.entries(i.data||{}))r.set(o,a);t.body=r.toString()}else if(n.includes("multipart/form-data")||i.data instanceof FormData){const r=new FormData;if(i.data instanceof FormData)i.data.forEach((a,d)=>{r.append(d,a)});else for(const a of Object.keys(i.data))r.append(a,i.data[a]);t.body=r;const o=new Headers(t.headers);o.delete("content-type"),t.headers=o}else(n.includes("application/json")||typeof i.data=="object")&&(t.body=JSON.stringify(i.data));return t};class Z extends K{async request(e){const t=Y(e,e.webFetchExtra),s=X(e.params,e.shouldEncodeUrlParams),n=s?`${e.url}?${s}`:e.url,r=await fetch(n,t),o=r.headers.get("content-type")||"";let{responseType:a="text"}=r.ok?e:{};o.includes("application/json")&&(a="json");let d,w;switch(a){case"arraybuffer":case"blob":w=await r.blob(),d=await J(w);break;case"json":d=await r.json();break;case"document":case"text":default:d=await r.text()}const P={};return r.headers.forEach((c,l)=>{P[l]=c}),{data:d,headers:P,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}U("CapacitorHttp",{web:()=>new Z});const N=U("Device",{web:()=>z(()=>import("./D-B8_Dp1.js"),[],import.meta.url).then(i=>new i.DeviceWeb)});class ee{static deviceInfo=null;static initialized=!1;static async initialize(){if(!this.initialized)try{h.isNativePlatform()&&(this.deviceInfo=await N.getInfo()),this.initialized=!0}catch(e){console.warn("Failed to initialize device detection:",e),this.initialized=!0}}static async isAndroidTV(){if(await this.initialize(),!h.isNativePlatform()||h.getPlatform()!=="android")return!1;if(this.deviceInfo){const a=this.deviceInfo.model?.toLowerCase()||"",d=this.deviceInfo.manufacturer?.toLowerCase()||"",w=["nvidia","sony","philips","tcl","hisense","xiaomi"],P=["shield","bravia","androidtv","googletv","chromecast"];if(w.some(c=>d.includes(c))||P.some(c=>a.includes(c)))return!0}const e=navigator.userAgent.toLowerCase();if(["android tv","googletv","smarttv","smart-tv","television","settopbox","nexus player","adt-"].some(a=>e.includes(a)))return!0;const s=window.screen.width,n=window.screen.height,r=Math.sqrt(s*s+n*n),o=window.devicePixelRatio||1;return r>2e3&&o<=2}static async getUIMode(){if(await this.initialize(),h.getPlatform()==="android"){if(await this.isAndroidTV())return"television";const e=window.screen.width>window.screen.height,t=window.screen.width/window.screen.height;if(e&&t>2.5)return"car"}return"normal"}static async isLeanback(){return await this.getUIMode()==="television"||await this.isAndroidTV()}static async hasPhysicalKeyboard(){return await this.initialize(),h.getPlatform()==="web"?this.detectWebKeyboard():h.getPlatform()==="android"?await this.isAndroidTV()?await this.detectTVKeyboard():!1:h.getPlatform()==="ios"?await this.detectIOSKeyboard():!1}static async detectTVKeyboard(){try{if("bluetooth"in navigator)return!1}catch{}return new Promise(e=>{const t=setTimeout(()=>{s(),e(!1)},100),s=()=>{document.removeEventListener("keydown",n),clearTimeout(t)},n=r=>{r.key&&r.key.length===1&&!r.altKey&&!r.ctrlKey&&(s(),e(!0))};document.addEventListener("keydown",n)})}static detectWebKeyboard(){return!!(window.matchMedia&&window.matchMedia("(pointer: fine)").matches||!("ontouchstart"in window)&&!navigator.maxTouchPoints||window.matchMedia&&window.matchMedia("(hover: hover)").matches)}static async detectIOSKeyboard(){return this.deviceInfo?.model?.toLowerCase().includes("ipad"),!1}static async isTouchDevice(){return await this.initialize(),h.getPlatform()==="web"?"ontouchstart"in window||navigator.maxTouchPoints>0:h.getPlatform()==="android"?!await this.isAndroidTV():h.getPlatform()==="ios"}static supportsGamepad(){return"getGamepads"in navigator}static getConnectedGamepads(){if(!this.supportsGamepad())return[];const e=navigator.getGamepads();return Array.from(e).filter(t=>t!==null)}static async getScreenType(){if(await this.initialize(),await this.isAndroidTV())return"tv";const e=window.screen.width,t=window.screen.height,s=Math.max(e,t),n=Math.min(e,t);if(h.getPlatform()==="web"&&s>=1280)return"desktop";if(this.deviceInfo&&h.isNativePlatform()){const r=this.deviceInfo.model?.toLowerCase()||"";if(r.includes("tablet")||r.includes("ipad"))return"tablet";const o=window.devicePixelRatio||1,a=e/o,d=t/o;if(Math.max(a,d)>=900)return"tablet"}return s>=1024&&n>=768?"tablet":"mobile"}static async getInputMethods(){const e=[];return await this.isTouchDevice()&&e.push("touch"),await this.hasPhysicalKeyboard()?e.push("keyboard"):e.push("virtual-keyboard"),window.matchMedia&&window.matchMedia("(pointer: fine)").matches&&e.push("mouse"),await this.isAndroidTV()&&(e.push("dpad"),e.push("remote")),this.supportsGamepad()&&this.getConnectedGamepads().length>0&&e.push("gamepad"),e}static async getAdvancedDeviceInfo(){await this.initialize();const e=await this.isAndroidTV(),t=await this.hasPhysicalKeyboard(),s=await this.isTouchDevice(),n=await this.getScreenType(),r=await this.getInputMethods(),o=await this.getUIMode(),a=await this.isLeanback(),d=e||a||(n==="tv"||n==="desktop")&&(r.includes("dpad")||r.includes("remote")||!s&&r.includes("gamepad"));return{isTV:e,hasPhysicalKeyboard:t,isTouchDevice:s,screenType:n,inputMethods:r,deviceInfo:this.deviceInfo,uiMode:o,isLeanback:a,hasHardwareKeyboard:t,supportsGamepad:this.supportsGamepad(),shouldUseTVUI:d}}static async shouldUseTVUI(){await this.initialize();const e=await this.isAndroidTV(),t=await this.isLeanback();if(e||t)return!0;const s=await this.getScreenType(),n=await this.getInputMethods(),r=await this.isTouchDevice();return!!((s==="tv"||s==="desktop")&&(n.includes("dpad")||n.includes("remote")||!r&&n.includes("gamepad")))}}const ne=()=>ee.getAdvancedDeviceInfo();export{K as W,se as c,ne as g,re as s};

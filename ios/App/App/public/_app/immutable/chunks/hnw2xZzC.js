import"./NZTpNUN0.js";import{i as Oe}from"./CeCCmokf.js";import{l as Qt,w as X,e as F,s as se,o as Ct,a as Zt}from"./C1kKUYEy.js";import{y as ze,q as de,am as er,A as kt,v as tr,o as rr,g as x,a2 as sr,w as ar,H as nr,x as vt,z as Ke,I as De,an as ir,ar as or,B as tt,D as cr,C as xe,av as Pt,ak as lr,m as ae,aN as ht,aO as dr,F as It,G as ur,aP as fr,aQ as Ge,aR as Lt,aS as vr,aT as hr,ap as pr,aU as gr,au as mr,aV as wr,a5 as br,aW as yr,u as Ee,K as _r,p as Ve,f as O,e as _,d as p,r as h,n as he,t as j,s as N,b as I,c as $e,aX as nt,l as xr,R as Tr,a as Ar,j as ke,k as Er,i as rt}from"./1i-y1yM3.js";import{i as H,b as Cr}from"./vcaSNNIp.js";import{r as St,s as Dt,l as kr,g as Ut,_ as Pr,C as Ir,c as pt,e as Lr,f as Sr,h as Dr,i as it,j as Ur,k as Mr,p as Or,u as Vr,F as $r,m as Rr,n as Ye,q as Ue,t as Nr,v as gt,w as Je,x as mt,y as Ne,z as wt,T as bt,A as Fr,a as re,B as Te,D as Hr,E as jr,G as Wr,H as Br,I as qr,o as zr,J as Kr,b as Gr}from"./BdwO4JHG.js";import{_ as Mt,p as Fe,s as ie,a as ot,b as Me}from"./D_ssVqTO.js";import{g as Yr}from"./DM5PEVCe.js";function Jr(s,e){return e}function Xr(s,e,t){for(var r=s.items,a=[],n=e.length,i=0;i<n;i++)gr(e[i].e,a,!0);var o=n>0&&a.length===0&&t!==null;if(o){var d=t.parentNode;mr(d),d.append(t),r.clear(),le(s,e[0].prev,e[n-1].next)}wr(a,()=>{for(var c=0;c<n;c++){var f=e[c];o||(r.delete(f.k),le(s,f.prev,f.next)),Lt(f.e,!o)}})}function Qr(s,e,t,r,a,n=null){var i=s,o={flags:e,items:new Map,first:null};{var d=s;i=de?ze(er(d)):d.appendChild(kt())}de&&tr();var c=null,f=!1,m=new Map,u=sr(()=>{var y=t();return lr(y)?y:y==null?[]:Pt(y)}),T,b;function g(){Zr(b,T,o,m,i,a,e,r,t),n!==null&&(T.length===0?c?It(c):c=tt(()=>n(i)):c!==null&&ur(c,()=>{c=null}))}rr(()=>{b??=br,T=x(u);var y=T.length;if(f&&y===0)return;f=y===0;let V=!1;if(de){var L=ar(i)===nr;L!==(y===0)&&(i=vt(),ze(i),Ke(!1),V=!0)}if(de){for(var P=null,M,S=0;S<y;S++){if(De.nodeType===ir&&De.data===or){i=De,V=!0,Ke(!1);break}var E=T[S],U=r(E,S);M=st(De,o,P,null,E,U,S,a,e,t),o.items.set(U,M),P=M}y>0&&ze(vt())}if(de)y===0&&n&&(c=tt(()=>n(i)));else if(cr()){var l=new Set,v=xe;for(S=0;S<y;S+=1){E=T[S],U=r(E,S);var A=o.items.get(U)??m.get(U);A?Ot(A,E,S):(M=st(null,o,null,null,E,U,S,a,e,t,!0),m.set(U,M)),l.add(U)}for(const[C,k]of o.items)l.has(C)||v.skipped_effects.add(k.e);v.add_callback(g)}else g();V&&Ke(!0),x(u)}),de&&(i=De)}function Zr(s,e,t,r,a,n,i,o,d){var c=e.length,f=t.items,m=t.first,u=m,T,b=null,g=[],y=[],V,L,P,M;for(M=0;M<c;M+=1){if(V=e[M],L=o(V,M),P=f.get(L),P===void 0){var S=r.get(L);if(S!==void 0){r.delete(L),f.set(L,S);var E=b?b.next:u;le(t,b,S),le(t,S,E),Xe(S,E,a),b=S}else{var U=u?u.e.nodes_start:a;b=st(U,t,b,b===null?t.first:b.next,V,L,M,n,i,d)}f.set(L,b),g=[],y=[],u=b.next;continue}if(Ot(P,V,M),(P.e.f&Ge)!==0&&It(P.e),P!==u){if(T!==void 0&&T.has(P)){if(g.length<y.length){var l=y[0],v;b=l.prev;var A=g[0],C=g[g.length-1];for(v=0;v<g.length;v+=1)Xe(g[v],l,a);for(v=0;v<y.length;v+=1)T.delete(y[v]);le(t,A.prev,C.next),le(t,b,A),le(t,C,l),u=l,b=C,M-=1,g=[],y=[]}else T.delete(P),Xe(P,u,a),le(t,P.prev,P.next),le(t,P,b===null?t.first:b.next),le(t,b,P),b=P;continue}for(g=[],y=[];u!==null&&u.k!==L;)(u.e.f&Ge)===0&&(T??=new Set).add(u),y.push(u),u=u.next;if(u===null)continue;P=u}g.push(P),b=P,u=P.next}if(u!==null||T!==void 0){for(var k=T===void 0?[]:Pt(T);u!==null;)(u.e.f&Ge)===0&&k.push(u),u=u.next;var w=k.length;if(w>0){var B=c===0?a:null;Xr(t,k,B)}}s.first=t.first&&t.first.e,s.last=b&&b.e;for(var J of r.values())Lt(J.e);r.clear()}function Ot(s,e,t,r){dr(s.v,e),s.i=t}function st(s,e,t,r,a,n,i,o,d,c,f){var m=(d&vr)!==0,u=(d&hr)===0,T=m?u?ae(a,!1,!1):ht(a):a,b=(d&fr)===0?i:ht(i),g={i:b,v:T,k:n,a:null,e:null,prev:t,next:r};try{if(s===null){var y=document.createDocumentFragment();y.append(s=kt())}return g.e=tt(()=>o(s,T,b,c),de),g.e.prev=t&&t.e,g.e.next=r&&r.e,t===null?f||(e.first=g):(t.next=g,t.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{}}function Xe(s,e,t){for(var r=s.next?s.next.e.nodes_start:t,a=e?e.e.nodes_start:t,n=s.e.nodes_start;n!==null&&n!==r;){var i=pr(n);a.before(n),n=i}}function le(s,e,t){e===null?s.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const yt=[...` 	
\r\fÂ \v\uFEFF`];function es(s,e,t){var r=s==null?"":""+s;if(e&&(r=r?r+" "+e:e),t){for(var a in t)if(t[a])r=r?r+" "+a:a;else if(r.length)for(var n=a.length,i=0;(i=r.indexOf(a,i))>=0;){var o=i+n;(i===0||yt.includes(r[i-1]))&&(o===r.length||yt.includes(r[o]))?r=(i===0?"":r.substring(0,i))+r.substring(o+1):i=o}}return r===""?null:r}function Ce(s,e,t,r,a,n){var i=s.__className;if(de||i!==t||i===void 0){var o=es(t,r,n);(!de||o!==s.getAttribute("class"))&&(o==null?s.removeAttribute("class"):s.className=o),s.__className=t}else if(n&&a!==n)for(var d in n){var c=!!n[d];(a==null||c!==!!a[d])&&s.classList.toggle(d,c)}return n}function Ae(s,e,t=e){var r=yr(),a=new WeakSet;Qt(s,"input",n=>{var i=n?s.defaultValue:s.value;if(i=Qe(s)?Ze(i):i,t(i),xe!==null&&a.add(xe),r&&i!==(i=e())){var o=s.selectionStart,d=s.selectionEnd;s.value=i??"",d!==null&&(s.selectionStart=o,s.selectionEnd=Math.min(d,s.value.length))}}),(de&&s.defaultValue!==s.value||Ee(e)==null&&s.value)&&(t(Qe(s)?Ze(s.value):s.value),xe!==null&&a.add(xe)),_r(()=>{var n=e();s===document.activeElement&&a.has(xe)||Qe(s)&&n===Ze(s.value)||s.type==="date"&&!n&&!s.value||n!==s.value&&(s.value=n??"")})}function Qe(s){var e=s.type;return e==="number"||e==="range"}function Ze(s){return s===""?null:+s}function ts(s){return function(...e){var t=e[0];return t.preventDefault(),s?.apply(this,e)}}class Vt{static async loadUserImages(e){if(!e)return[];try{const t=St(Dt,`images/${e.uid}`),a=(await kr(t)).items.sort((i,o)=>i.name.localeCompare(o.name));return await Promise.all(a.map(async i=>await Ut(i)))}catch(t){return console.error("Error loading images:",t),[]}}static async loadUserImagesWithRetry(e,t=0,r=3){if(!e)return[];let a=0,n=[];for(;a<r&&(a>0&&await new Promise(i=>setTimeout(i,500*a)),n=await this.loadUserImages(e),!(n.length>t));)a++;return n}}/*! Capacitor: https://capacitorjs.com/ - MIT License */var Pe;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(Pe||(Pe={}));class et extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const rs=s=>{var e,t;return s?.androidBridge?"android":!((t=(e=s?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},ss=s=>{const e=s.CapacitorCustomPlatform||null,t=s.Capacitor||{},r=t.Plugins=t.Plugins||{},a=()=>e!==null?e.name:rs(s),n=()=>a()!=="web",i=m=>{const u=c.get(m);return!!(u?.platforms.has(a())||o(m))},o=m=>{var u;return(u=t.PluginHeaders)===null||u===void 0?void 0:u.find(T=>T.name===m)},d=m=>s.console.error(m),c=new Map,f=(m,u={})=>{const T=c.get(m);if(T)return console.warn(`Capacitor plugin "${m}" already registered. Cannot register plugins twice.`),T.proxy;const b=a(),g=o(m);let y;const V=async()=>(!y&&b in u?y=typeof u[b]=="function"?y=await u[b]():y=u[b]:e!==null&&!y&&"web"in u&&(y=typeof u.web=="function"?y=await u.web():y=u.web),y),L=(l,v)=>{var A,C;if(g){const k=g?.methods.find(w=>v===w.name);if(k)return k.rtype==="promise"?w=>t.nativePromise(m,v.toString(),w):(w,B)=>t.nativeCallback(m,v.toString(),w,B);if(l)return(A=l[v])===null||A===void 0?void 0:A.bind(l)}else{if(l)return(C=l[v])===null||C===void 0?void 0:C.bind(l);throw new et(`"${m}" plugin is not implemented on ${b}`,Pe.Unimplemented)}},P=l=>{let v;const A=(...C)=>{const k=V().then(w=>{const B=L(w,l);if(B){const J=B(...C);return v=J?.remove,J}else throw new et(`"${m}.${l}()" is not implemented on ${b}`,Pe.Unimplemented)});return l==="addListener"&&(k.remove=async()=>v()),k};return A.toString=()=>`${l.toString()}() { [capacitor code] }`,Object.defineProperty(A,"name",{value:l,writable:!1,configurable:!1}),A},M=P("addListener"),S=P("removeListener"),E=(l,v)=>{const A=M({eventName:l},v),C=async()=>{const w=await A;S({eventName:l,callbackId:w},v)},k=new Promise(w=>A.then(()=>w({remove:C})));return k.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await C()},k},U=new Proxy({},{get(l,v){switch(v){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?E:M;case"removeListener":return S;default:return P(v)}}});return r[m]=U,c.set(m,{name:m,proxy:U,platforms:new Set([...Object.keys(u),...g?[b]:[]])}),U};return t.convertFileSrc||(t.convertFileSrc=m=>m),t.getPlatform=a,t.handleError=d,t.isNativePlatform=n,t.isPluginAvailable=i,t.registerPlugin=f,t.Exception=et,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},as=s=>s.Capacitor=ss(s),Q=as(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ct=Q.registerPlugin;class $t{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n),r&&this.sendRetainedArgumentsForEvent(e);const i=async()=>this.removeListener(e,t);return Promise.resolve({remove:i})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const a=this.listeners[e];if(!a){if(r){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}return}a.forEach(n=>n(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new Q.Exception(e,Pe.Unimplemented)}unavailable(e="not available"){return new Q.Exception(e,Pe.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const a=r.indexOf(t);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const _t=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),xt=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ns extends $t{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[a,n]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=xt(a).trim(),n=xt(n).trim(),t[a]=n}),t}async setCookie(e){try{const t=_t(e.key),r=_t(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,n=(e.path||"/").replace("path=",""),i=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${a}; path=${n}; ${i};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}ct("CapacitorCookies",{web:()=>new ns});const is=async s=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const a=r.result;e(a.indexOf(",")>=0?a.split(",")[1]:a)},r.onerror=a=>t(a),r.readAsDataURL(s)}),os=(s={})=>{const e=Object.keys(s);return Object.keys(s).map(a=>a.toLocaleLowerCase()).reduce((a,n,i)=>(a[n]=s[e[i]],a),{})},cs=(s,e=!0)=>s?Object.entries(s).reduce((r,a)=>{const[n,i]=a;let o,d;return Array.isArray(i)?(d="",i.forEach(c=>{o=e?encodeURIComponent(c):c,d+=`${n}=${o}&`}),d.slice(0,-1)):(o=e?encodeURIComponent(i):i,d=`${n}=${o}`),`${r}&${d}`},"").substr(1):null,ls=(s,e={})=>{const t=Object.assign({method:s.method||"GET",headers:s.headers},e),a=os(s.headers)["content-type"]||"";if(typeof s.data=="string")t.body=s.data;else if(a.includes("application/x-www-form-urlencoded")){const n=new URLSearchParams;for(const[i,o]of Object.entries(s.data||{}))n.set(i,o);t.body=n.toString()}else if(a.includes("multipart/form-data")||s.data instanceof FormData){const n=new FormData;if(s.data instanceof FormData)s.data.forEach((o,d)=>{n.append(d,o)});else for(const o of Object.keys(s.data))n.append(o,s.data[o]);t.body=n;const i=new Headers(t.headers);i.delete("content-type"),t.headers=i}else(a.includes("application/json")||typeof s.data=="object")&&(t.body=JSON.stringify(s.data));return t};class ds extends $t{async request(e){const t=ls(e,e.webFetchExtra),r=cs(e.params,e.shouldEncodeUrlParams),a=r?`${e.url}?${r}`:e.url,n=await fetch(a,t),i=n.headers.get("content-type")||"";let{responseType:o="text"}=n.ok?e:{};i.includes("application/json")&&(o="json");let d,c;switch(o){case"arraybuffer":case"blob":c=await n.blob(),d=await is(c);break;case"json":d=await n.json();break;case"document":case"text":default:d=await n.text()}const f={};return n.headers.forEach((m,u)=>{f[u]=m}),{data:d,headers:f,status:n.status,url:n.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}ct("CapacitorHttp",{web:()=>new ds});const us=ct("Device",{web:()=>Mt(()=>import("./C-QE9Ors.js"),[],import.meta.url).then(s=>new s.DeviceWeb)});class Rt{static deviceInfo=null;static initialized=!1;static async initialize(){if(!this.initialized)try{Q.isNativePlatform()&&(this.deviceInfo=await us.getInfo()),this.initialized=!0}catch(e){console.warn("Failed to initialize device detection:",e),this.initialized=!0}}static isTVModeForced(){return typeof window>"u"?!1:new URLSearchParams(window.location.search).get("tv")==="true"?!0:localStorage.getItem("tv_mode")==="true"}static async isAndroidTV(){if(await this.initialize(),this.isTVModeForced())return!0;if(!Q.isNativePlatform()||Q.getPlatform()!=="android")return!1;if(this.deviceInfo){const o=this.deviceInfo.model?.toLowerCase()||"",d=this.deviceInfo.manufacturer?.toLowerCase()||"",c=["nvidia","sony","philips","tcl","hisense","xiaomi"],f=["shield","bravia","androidtv","googletv","chromecast"];if(c.some(m=>d.includes(m))||f.some(m=>o.includes(m)))return!0}const e=navigator.userAgent.toLowerCase();if(["android tv","googletv","smarttv","smart-tv","television","settopbox","nexus player","adt-"].some(o=>e.includes(o)))return!0;const r=window.screen.width,a=window.screen.height,n=Math.sqrt(r*r+a*a),i=window.devicePixelRatio||1;return n>2e3&&i<=2}static async getUIMode(){if(await this.initialize(),Q.getPlatform()==="android"){if(await this.isAndroidTV())return"television";const e=window.screen.width>window.screen.height,t=window.screen.width/window.screen.height;if(e&&t>2.5)return"car"}return"normal"}static async isLeanback(){return await this.getUIMode()==="television"||await this.isAndroidTV()}static async hasPhysicalKeyboard(){return await this.initialize(),Q.getPlatform()==="web"?this.detectWebKeyboard():Q.getPlatform()==="android"?await this.isAndroidTV()?await this.detectTVKeyboard():!1:Q.getPlatform()==="ios"?await this.detectIOSKeyboard():!1}static async detectTVKeyboard(){try{if("bluetooth"in navigator)return!1}catch{}return new Promise(e=>{const t=setTimeout(()=>{r(),e(!1)},100),r=()=>{document.removeEventListener("keydown",a),clearTimeout(t)},a=n=>{n.key&&n.key.length===1&&!n.altKey&&!n.ctrlKey&&(r(),e(!0))};document.addEventListener("keydown",a)})}static detectWebKeyboard(){return!!(window.matchMedia&&window.matchMedia("(pointer: fine)").matches||!("ontouchstart"in window)&&!navigator.maxTouchPoints||window.matchMedia&&window.matchMedia("(hover: hover)").matches)}static async detectIOSKeyboard(){return this.deviceInfo?.model?.toLowerCase().includes("ipad"),!1}static async isTouchDevice(){return await this.initialize(),Q.getPlatform()==="web"?"ontouchstart"in window||navigator.maxTouchPoints>0:Q.getPlatform()==="android"?!await this.isAndroidTV():Q.getPlatform()==="ios"}static supportsGamepad(){return"getGamepads"in navigator}static getConnectedGamepads(){if(!this.supportsGamepad())return[];const e=navigator.getGamepads();return Array.from(e).filter(t=>t!==null)}static async getScreenType(){if(await this.initialize(),await this.isAndroidTV())return"tv";const e=window.screen.width,t=window.screen.height,r=Math.max(e,t),a=Math.min(e,t);if(Q.getPlatform()==="web"&&r>=1280)return"desktop";if(this.deviceInfo&&Q.isNativePlatform()){const n=this.deviceInfo.model?.toLowerCase()||"";if(n.includes("tablet")||n.includes("ipad"))return"tablet";const i=window.devicePixelRatio||1,o=e/i,d=t/i;if(Math.max(o,d)>=900)return"tablet"}return r>=1024&&a>=768?"tablet":"mobile"}static async getInputMethods(){const e=[];return await this.isTouchDevice()&&e.push("touch"),await this.hasPhysicalKeyboard()?e.push("keyboard"):e.push("virtual-keyboard"),window.matchMedia&&window.matchMedia("(pointer: fine)").matches&&e.push("mouse"),await this.isAndroidTV()&&(e.push("dpad"),e.push("remote")),this.supportsGamepad()&&this.getConnectedGamepads().length>0&&e.push("gamepad"),e}static async getAdvancedDeviceInfo(){await this.initialize();const e=await this.isAndroidTV(),t=await this.hasPhysicalKeyboard(),r=await this.isTouchDevice(),a=await this.getScreenType(),n=await this.getInputMethods(),i=await this.getUIMode(),o=await this.isLeanback(),d=e||o||(a==="tv"||a==="desktop")&&(n.includes("dpad")||n.includes("remote")||!r&&n.includes("gamepad"));return{isTV:e,hasPhysicalKeyboard:t,isTouchDevice:r,screenType:a,inputMethods:n,deviceInfo:this.deviceInfo,uiMode:i,isLeanback:o,hasHardwareKeyboard:t,supportsGamepad:this.supportsGamepad(),shouldUseTVUI:d}}static async shouldUseTVUI(){await this.initialize();const e=await this.isAndroidTV(),t=await this.isLeanback();if(e||t)return!0;const r=await this.getScreenType(),a=await this.getInputMethods(),n=await this.isTouchDevice();return!!((r==="tv"||r==="desktop")&&(a.includes("dpad")||a.includes("remote")||!n&&a.includes("gamepad")))}}const Nt=()=>Rt.isAndroidTV(),Ft=()=>typeof window>"u"?!1:new URLSearchParams(window.location.search).get("tv")==="true"||localStorage.getItem("tv_mode")==="true",fs=Object.freeze(Object.defineProperty({__proto__:null,AdvancedDeviceDetector:Rt,isAndroidTV:Nt,isTVModeEnabled:Ft},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="type.googleapis.com/google.protobuf.Int64Value",hs="type.googleapis.com/google.protobuf.UInt64Value";function Ht(s,e){const t={};for(const r in s)s.hasOwnProperty(r)&&(t[r]=e(s[r]));return t}function He(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(e=>He(e));if(typeof s=="function"||typeof s=="object")return Ht(s,e=>He(e));throw new Error("Data cannot be encoded in JSON: "+s)}function Ie(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case vs:case hs:{const e=Number(s.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+s);return e}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(e=>Ie(e)):typeof s=="function"||typeof s=="object"?Ht(s,e=>Ie(e)):s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends $r{constructor(e,t,r){super(`${lt}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,ne.prototype)}}function ps(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function je(s,e){let t=ps(s),r=t,a;try{const n=e&&e.error;if(n){const i=n.status;if(typeof i=="string"){if(!Tt[i])return new ne("internal","internal");t=Tt[i],r=i}const o=n.message;typeof o=="string"&&(r=o),a=n.details,a!==void 0&&(a=Ie(a))}}catch{}return t==="ok"?null:new ne(t,r,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,t,r,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Lr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(n=>this.auth=n,()=>{}),this.messaging||r.get().then(n=>this.messaging=n,()=>{}),this.appCheck||a?.get().then(n=>this.appCheck=n,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="us-central1",ms=/^data: (.*?)(?:\n|$)/;function ws(s){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new ne("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{e&&clearTimeout(e)}}}class bs{constructor(e,t,r,a,n=at,i=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new gs(e,t,r,a),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(n);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=at}catch{this.customDomain=null,this.region=n}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function ys(s,e,t){const r=Mr(e);s.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(Or(s.emulatorOrigin),Vr("Functions",!0))}function _s(s,e,t){const r=a=>Ts(s,e,a,{});return r.stream=(a,n)=>Es(s,e,a,n),r}async function xs(s,e,t,r){t["Content-Type"]="application/json";let a;try{a=await r(s,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let n=null;try{n=await a.json()}catch{}return{status:a.status,json:n}}async function jt(s,e){const t={},r=await s.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function Ts(s,e,t,r){const a=s._url(e);return As(s,a,t,r)}async function As(s,e,t,r){t=He(t);const a={data:t},n=await jt(s,r),i=r.timeout||7e4,o=ws(i),d=await Promise.race([xs(e,a,n,s.fetchImpl),o.promise,s.cancelAllRequests]);if(o.cancel(),!d)throw new ne("cancelled","Firebase Functions instance was deleted.");const c=je(d.status,d.json);if(c)throw c;if(!d.json)throw new ne("internal","Response is not valid JSON object.");let f=d.json.data;if(typeof f>"u"&&(f=d.json.result),typeof f>"u")throw new ne("internal","Response is missing data field.");return{data:Ie(f)}}function Es(s,e,t,r){const a=s._url(e);return Cs(s,a,t,r||{})}async function Cs(s,e,t,r){var a;t=He(t);const n={data:t},i=await jt(s,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await s.fetchImpl(e,{method:"POST",body:JSON.stringify(n),headers:i,signal:r?.signal})}catch(T){if(T instanceof Error&&T.name==="AbortError"){const g=new ne("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const b=je(0,null);return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}let d,c;const f=new Promise((T,b)=>{d=T,c=b});(a=r?.signal)===null||a===void 0||a.addEventListener("abort",()=>{const T=new ne("cancelled","Request was cancelled.");c(T)});const m=o.body.getReader(),u=ks(m,d,c,r?.signal);return{stream:{[Symbol.asyncIterator](){const T=u.getReader();return{async next(){const{value:b,done:g}=await T.read();return{value:b,done:g}},async return(){return await T.cancel(),{done:!0,value:void 0}}}}},data:f}}function ks(s,e,t,r){const a=(i,o)=>{const d=i.match(ms);if(!d)return;const c=d[1];try{const f=JSON.parse(c);if("result"in f){e(Ie(f.result));return}if("message"in f){o.enqueue(Ie(f.message));return}if("error"in f){const m=je(0,f);o.error(m),t(m);return}}catch(f){if(f instanceof ne){o.error(f),t(f);return}}},n=new TextDecoder;return new ReadableStream({start(i){let o="";return d();async function d(){if(r?.aborted){const c=new ne("cancelled","Request was cancelled");return i.error(c),t(c),Promise.resolve()}try{const{value:c,done:f}=await s.read();if(f){o.trim()&&a(o.trim(),i),i.close();return}if(r?.aborted){const u=new ne("cancelled","Request was cancelled");i.error(u),t(u),await s.cancel();return}o+=n.decode(c,{stream:!0});const m=o.split(`
`);o=m.pop()||"";for(const u of m)u.trim()&&a(u.trim(),i);return d()}catch(c){const f=c instanceof ne?c:je(0,null);i.error(f),t(f)}}},cancel(){return s.cancel()}})}const At="@firebase/functions",Et="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="auth-internal",Is="app-check-internal",Ls="messaging-internal";function Ss(s){const e=(t,{instanceIdentifier:r})=>{const a=t.getProvider("app").getImmediate(),n=t.getProvider(Ps),i=t.getProvider(Ls),o=t.getProvider(Is);return new bs(a,n,i,o,r)};Pr(new Ir(lt,e,"PUBLIC").setMultipleInstances(!0)),pt(At,Et,s),pt(At,Et,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(s=Sr(),e=at){const r=Dr(it(s),lt).getImmediate({identifier:e}),a=Ur("functions");return a&&Us(r,...a),r}function Us(s,e,t){ys(it(s),e,t)}function Ms(s,e,t){return _s(it(s),e)}Ss();class ye{static CODE_LENGTH=4;static CODE_EXPIRY_MS=5*60*1e3;static COLLECTION_NAME="tv_auth_codes";static DEVICE_ID_KEY="tv_device_id";static authCode=X(null);static authStatus=X("idle");static generateCode(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";let t="";for(let r=0;r<this.CODE_LENGTH;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}static getDeviceId(){if(typeof window>"u")return"server";let e=localStorage.getItem(this.DEVICE_ID_KEY);return e||(e="dev_"+Math.random().toString(36).substring(2,15),localStorage.setItem(this.DEVICE_ID_KEY,e)),e}static async storeAuthCode(e){try{return(await Rr(Ye(Ue,this.COLLECTION_NAME),{code:e.code,deviceId:e.deviceId,userAgent:e.userAgent,createdAt:Nr(),expiresAt:new Date(Date.now()+this.CODE_EXPIRY_MS),status:"pending"})).id}catch(t){return console.error("Failed to store auth code:",t),null}}static async getAuthCode(e){try{const t=gt(Ye(Ue,this.COLLECTION_NAME),Je("code","==",e)),r=await mt(t);if(r.empty)return null;const a=r.docs[0],n=a.data(),i=new Date,o=n.expiresAt.toDate();return i>o?(await Ne(a.ref,{status:"expired"}),null):{id:a.id,code:n.code,deviceId:n.deviceId,userAgent:n.userAgent,createdAt:n.createdAt,expiresAt:n.expiresAt,status:n.status,approvedBy:n.approvedBy,approvedByUser:n.approvedByUser}}catch(t){return console.error("Failed to get auth code:",t),null}}static async getPendingAuthCode(e){try{const t=gt(Ye(Ue,this.COLLECTION_NAME),Je("code","==",e),Je("status","==","pending")),r=await mt(t);if(r.empty)return null;const a=r.docs[0],n=a.data(),i=new Date,o=n.expiresAt.toDate();return i>o?(await Ne(a.ref,{status:"expired"}),null):{id:a.id,code:n.code,deviceId:n.deviceId,userAgent:n.userAgent,createdAt:n.createdAt,expiresAt:n.expiresAt,status:n.status,approvedBy:n.approvedBy,approvedByUser:n.approvedByUser}}catch(t){return console.error("Failed to get pending auth code:",t),null}}static async updateAuthCode(e,t,r){try{const a={status:t};return r&&(a.approvedBy=r),await Ne(wt(Ue,this.COLLECTION_NAME,e),a),!0}catch(a){return console.error("Failed to update auth code:",a),!1}}static async updateAuthCodeWithUser(e,t,r,a){try{const n={status:t,approvedBy:r,approvedByUser:a};return await Ne(wt(Ue,this.COLLECTION_NAME,e),n),!0}catch(n){return console.error("Failed to update auth code:",n),!1}}static async requestTVAuth(){const e=this.generateCode(),t=this.getDeviceId(),r={code:e,deviceId:t,userAgent:navigator.userAgent,createdAt:bt.now(),expiresAt:bt.fromDate(new Date(Date.now()+this.CODE_EXPIRY_MS)),status:"pending"},a=await this.storeAuthCode(r);return a?(r.id=a,this.authCode.set(e),this.authStatus.set("waiting"),new Promise(n=>{const i=setInterval(async()=>{try{const o=await this.getAuthCode(e);if(!o){clearInterval(i),this.authStatus.set("expired"),this.authCode.set(null),n({success:!1,error:"Code expired or not found"});return}if(o.status==="approved"){clearInterval(i),this.authStatus.set("approved"),this.authCode.set(null),this.authenticateWithCustomToken(n,o.approvedByUser,e);return}if(o.status==="denied"){clearInterval(i),this.authStatus.set("denied"),this.authCode.set(null),n({success:!1,error:"Authentication denied"});return}if(o.status==="expired"){clearInterval(i),this.authStatus.set("expired"),this.authCode.set(null),n({success:!1,error:"Code expired"});return}}catch(o){console.error("Error polling for approval:",o)}},2e3);setTimeout(()=>{clearInterval(i),this.authStatus.getValue?.()==="waiting"&&(this.authStatus.set("expired"),this.authCode.set(null),n({success:!1,error:"Code expired"}))},this.CODE_EXPIRY_MS)})):{success:!1,error:"Failed to generate code"}}static async authenticateWithCustomToken(e,t,r){try{if(!r){e({success:!1,error:"No code available for authentication"});return}const a=Ds(),i=await Ms(a,"generateTVToken")({code:r}),{customToken:o,userInfo:d}=i.data;if(!o){e({success:!1,error:"Failed to generate authentication token"});return}const c=await Fr(re,o);e({success:!0,user:c.user})}catch(a){console.error("Custom token authentication failed:",a);let n="Authentication failed";a?.code==="functions/not-found"?n="Code not found or not approved":a?.code==="functions/deadline-exceeded"?n="Code has expired":a?.message&&(n=a.message),e({success:!1,error:n})}}static async approveCode(e){try{const t=re.currentUser;if(!t)return{success:!1,error:"User not logged in"};const r=await this.getPendingAuthCode(e.toUpperCase());if(!r)return{success:!1,error:"Invalid or expired code"};const a={uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL};return await this.updateAuthCodeWithUser(r.id,"approved",t.uid,a)?{success:!0}:{success:!1,error:"Failed to approve code"}}catch(t){return console.error("Error approving code:",t),{success:!1,error:"Failed to approve code"}}}static async denyCode(e){try{const t=re.currentUser;if(!t)return{success:!1,error:"User not logged in"};const r=await this.getAuthCode(e.toUpperCase());return r?await this.updateAuthCode(r.id,"denied",t.uid)?{success:!0}:{success:!1,error:"Failed to deny code"}:{success:!1,error:"Invalid or expired code"}}catch(t){return console.error("Error denying code:",t),{success:!1,error:"Failed to deny code"}}}static cancelTVAuth(){this.authCode.set(null),this.authStatus.set("idle")}static async cleanupExpiredCodes(){}static initialize(){}static getTimeRemaining(e){const t=Date.now(),r=e.toMillis()+this.CODE_EXPIRY_MS,a=Math.max(0,r-t),n=Math.floor(a/6e4),i=Math.floor(a%6e4/1e3);return`${n}:${i.toString().padStart(2,"0")}`}static async isLikelyTV(){const{isAndroidTV:e}=await Mt(async()=>{const{isAndroidTV:t}=await Promise.resolve().then(()=>fs);return{isAndroidTV:t}},void 0,import.meta.url);return await e()}static getDeviceDisplayName(e){const t=e.toLowerCase();return t.includes("android tv")||t.includes("googletv")?"ðº Android TV":t.includes("smart-tv")||t.includes("smarttv")?"ðº Smart TV":t.includes("mobile")?"ð± Mobile Device":t.includes("tablet")?"ð± Tablet":t.includes("electron")?"ð» Desktop App":"ð¥ï¸ Unknown Device"}}typeof window<"u"&&ye.initialize();var Os=O("<div><span> </span></div>"),Vs=O('<span class="loading loading-spinner loading-sm"></span> Approving...',1),$s=nt('<svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Approve TV Login',1),Rs=O('<div class="mx-auto w-full max-w-md p-4"><div class="mb-6"><h2 class="flex items-center text-xl font-bold text-gray-800"><span class="mr-2">ðº</span> TV Login Code</h2> <p class="mt-1 text-sm text-gray-600">Enter the 4-letter code from your TV to approve login</p></div> <!> <div class="space-y-4"><div><label class="label" for="tv-code-input"><span class="label-text">4-Letter Code:</span></label> <input id="tv-code-input" type="text" class="input input-bordered w-full text-center font-mono text-2xl tracking-widest uppercase" placeholder="ABCD" maxlength="4"/></div> <div class="space-y-2"><button><!></button> <button class="btn btn-error btn-sm w-full"><span class="mr-1">â</span> Deny</button></div></div> <div class="mt-6 rounded-lg bg-blue-50 p-3"><h4 class="mb-1 text-sm font-semibold text-blue-800">How it works:</h4> <ol class="list-inside list-decimal space-y-1 text-xs text-blue-700"><li>Your TV displays a 4-letter code</li> <li>Enter the exact code here</li> <li>Click "Approve" to sign in your TV</li></ol> <p class="mt-2 text-xs text-blue-600">â ï¸ Only approve codes you recognize from your own TV</p></div></div>');function Ns(s,e){Ve(e,!1);let t=Fe(e,"onSuccess",8,void 0),r=ae(""),a=ae(!1),n=ae(""),i=ae("info");async function o(){if(x(r).length!==4){c("Please enter a 4-letter code","error");return}N(a,!0);try{const l=await ye.approveCode(x(r));l.success?(c("TV login approved successfully!","success"),N(r,""),setTimeout(()=>{t()?.()},1500)):c(l.error||"Failed to approve code","error")}catch{c("Failed to approve code","error")}finally{N(a,!1)}}async function d(){if(x(r).length!==4){c("Please enter a 4-letter code","error");return}N(a,!0);try{const l=await ye.denyCode(x(r));l.success?(c("TV login denied","info"),N(r,"")):c(l.error||"Failed to deny code","error")}catch{c("Failed to deny code","error")}finally{N(a,!1)}}function c(l,v){N(n,l),N(i,v),setTimeout(()=>{N(n,"")},5e3)}function f(l){l.key==="Enter"&&o()}Oe();var m=Rs(),u=_(p(m),2);{var T=l=>{var v=Os();let A;var C=p(v),k=p(C,!0);h(C),h(v),j(w=>{A=Ce(v,1,"alert mb-4",null,A,w),se(k,x(n))},[()=>({"alert-success":x(i)==="success","alert-error":x(i)==="error","alert-info":x(i)==="info"})]),I(l,v)};H(u,l=>{x(n)&&l(T)})}var b=_(u,2),g=p(b),y=_(p(g),2);Te(y),h(g);var V=_(g,2),L=p(V);let P;var M=p(L);{var S=l=>{var v=Vs();he(),I(l,v)},E=l=>{var v=$s();he(),I(l,v)};H(M,l=>{x(a)?l(S):l(E,!1)})}h(L);var U=_(L,2);h(V),h(b),he(2),h(m),j(l=>{y.disabled=x(a),P=Ce(L,1,"btn w-full border-blue-500 bg-blue-500 text-white hover:bg-blue-600",null,P,l),L.disabled=(x(r),x(a),Ee(()=>x(r).length!==4||x(a))),U.disabled=(x(r),x(a),Ee(()=>x(r).length!==4||x(a)))},[()=>({loading:x(a)})]),Ae(y,()=>x(r),l=>N(r,l)),F("input",y,l=>{const v=l.target;N(r,v.value.toUpperCase().replace(/[^A-Z]/g,""))}),F("keydown",y,f),F("click",L,o),F("click",U,d),I(s,m),$e()}var Fs=O('<span class="loading loading-spinner loading-sm"></span> Uploading...',1),Hs=nt('<svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> Upload Photo',1),js=O('<div class="bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black"><div class="relative w-full max-w-md rounded-lg bg-white p-6 shadow-xl"><button class="btn btn-circle btn-ghost btn-sm absolute top-2 right-2">â</button> <!></div></div>'),Ws=O('<input type="file" accept="image/*" class="hidden"/> <div class="flex flex-col items-center space-y-4"><button class="btn w-full border-orange-500 bg-orange-500 text-white hover:bg-orange-600"><!></button> <button class="btn w-full border-red-500 bg-red-500 text-white hover:bg-red-600"><svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> Slideshow</button> <button class="btn w-full border-green-500 bg-green-500 text-white hover:bg-green-600"><svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"></path></svg> Approve TV Login</button></div> <!>',1);function Bs(s,e){Ve(e,!1);const[t,r]=ot(),a=()=>ie(d,"$uploading",t);let n=Fe(e,"user",8),i=Fe(e,"uploadedImages",12),o=ae(!1);const d=X(!1),c=X(i());c.subscribe(A=>{i(A)});let f=ae();function m(){x(f)?.click()}async function u(A){const C=A.target,k=C.files;if(!(!k||k.length===0||!n())){d.set(!0);try{const w=k[0];if(!w.type.startsWith("image/")){alert("Please select an image file");return}const B=Date.now(),J=`${n().uid}/${B}_${w.name}`,Z=St(Dt,`images/${J}`),q=await Hr(Z,w),z=await Ut(q.ref);c.set([...i(),z]);const K=await Vt.loadUserImagesWithRetry(n(),i().length-1);c.set(K)}catch(w){console.error("Upload failed:",w),alert("Upload failed. Please try again.")}finally{d.set(!1),C.value=""}}}function T(){N(o,!x(o))}function b(){N(o,!1)}xr(()=>Tr(i()),()=>{c.set(i())}),Ar(),Oe();var g=Ws(),y=ke(g);Cr(y,A=>N(f,A),()=>x(f));var V=_(y,2),L=p(V),P=p(L);{var M=A=>{var C=Fs();he(),I(A,C)},S=A=>{var C=Hs();he(),I(A,C)};H(P,A=>{a()?A(M):A(S,!1)})}h(L);var E=_(L,2),U=_(E,2);h(V);var l=_(V,2);{var v=A=>{var C=js(),k=p(C),w=p(k),B=_(w,2);Ns(B,{onSuccess:b}),h(k),h(C),F("click",w,T),I(A,C)};H(l,A=>{x(o)&&A(v)})}j(()=>L.disabled=a()),F("change",y,u),F("click",L,m),F("click",E,()=>Yr("/slideshow")),F("click",U,T),I(s,g),$e(),r()}class _e{static async register(e,t,r){try{const n=(await jr(re,e,t)).user;return r&&await Wr(n,{displayName:r}),n}catch(a){console.error("Registration error:",a);const n=a;throw new Error(this.getErrorMessage(n.code))}}static async signIn(e,t){try{return(await Br(re,e,t)).user}catch(r){console.error("Sign in error:",r);const a=r;throw new Error(this.getErrorMessage(a.code))}}static async resetPassword(e){try{await qr(re,e)}catch(t){console.error("Password reset error:",t);const r=t;throw new Error(this.getErrorMessage(r.code))}}static async signOut(){try{await re.signOut()}catch(e){throw console.error("Sign out error:",e),e}}static getCurrentUser(){return re.currentUser}static async getCurrentUserAsync(){return new Promise(e=>{const t=re.onAuthStateChanged(r=>{t(),e(r)})})}static isSignedIn(){return!!re.currentUser}static async getAuthToken(){try{const e=re.currentUser;return e?await e.getIdToken():null}catch(e){return console.error("Error getting auth token:",e),null}}static async refreshAuthToken(){try{const e=re.currentUser;return e?await e.getIdToken(!0):null}catch(e){return console.error("Error refreshing auth token:",e),null}}static getErrorMessage(e){switch(e){case"auth/email-already-in-use":return"This email address is already registered. Please use a different email or try signing in.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/operation-not-allowed":return"Email/password accounts are not enabled. Please contact support.";case"auth/weak-password":return"Password should be at least 6 characters long.";case"auth/user-disabled":return"This account has been disabled. Please contact support.";case"auth/user-not-found":return"No account found with this email address. Please check your email or create a new account.";case"auth/wrong-password":return"Incorrect password. Please try again or reset your password.";case"auth/invalid-credential":return"Invalid email or password. Please check your credentials and try again.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later or reset your password.";case"auth/network-request-failed":return"Network error. Please check your internet connection and try again.";default:return"An error occurred during authentication. Please try again."}}static isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}static isValidPassword(e){return e.length<6?{valid:!1,message:"Password must be at least 6 characters long"}:{valid:!0}}}var qs=O('<span class="loading loading-spinner loading-sm mr-2"></span> Sending...',1),zs=nt('<svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg> Send Reset Email',1),Ks=O(`<div class="space-y-4"><div class="text-center"><h2 class="text-2xl font-bold text-gray-800">Reset Password</h2> <p class="mt-2 text-sm text-gray-600">Enter your email address and we'll send you a link to reset your password</p></div> <div class="space-y-4"><div><label for="reset-email" class="mb-1 block text-sm font-medium text-gray-700">Email Address</label> <input id="reset-email" type="email" placeholder="Enter your email" class="input input-bordered w-full"/></div> <button class="btn w-full border-0 bg-blue-500 text-white hover:bg-blue-600"><!></button> <button class="btn btn-ghost w-full text-gray-600">Back to Sign In</button></div></div>`),Gs=O(`<div class="text-center"><p class="text-sm text-gray-600">Don't have an account? <button class="ml-1 font-semibold text-orange-600 underline hover:text-orange-700">Create Account</button></p></div>`),Ys=O('<div><label for="display-name" class="mb-1 block text-sm font-medium text-gray-700">Display Name</label> <input id="display-name" type="text" placeholder="Name to display" class="input input-bordered w-full" required/></div>'),Js=O('<p class="mt-1 text-xs text-gray-500">Password must be at least 6 characters long</p>'),Xs=O('<div><label for="confirm-password" class="mb-1 block text-sm font-medium text-gray-700">Confirm Password</label> <input id="confirm-password" type="password" placeholder="Confirm your password" class="input input-bordered w-full" required/></div>'),Qs=O('<span class="loading loading-spinner loading-sm mr-2"></span> ',1),Zs=O('<button class="text-sm text-blue-600 underline hover:text-blue-700">Forgot your password?</button>'),ea=O('<div class="flex items-center"><div class="flex-1 border-t border-gray-300"></div> <span class="px-3 text-sm text-gray-500">or</span> <div class="flex-1 border-t border-gray-300"></div></div> <p class="text-sm text-gray-600">Already have an account? <button class="ml-1 text-blue-600 underline hover:text-blue-700">Sign In</button></p>',1),ta=O('<div class="space-y-4"><div class="text-center"><h2 class="text-2xl font-bold text-gray-800"> </h2> <p class="mt-2 text-sm text-gray-600"> </p></div> <!> <form class="space-y-4"><!> <div><label for="email" class="mb-1 block text-sm font-medium text-gray-700">Email Address</label> <input id="email" type="email" placeholder="Enter your email" class="input input-bordered w-full" required/></div> <div><label for="password" class="mb-1 block text-sm font-medium text-gray-700">Password</label> <input id="password" type="password" placeholder="Enter your password" class="input input-bordered w-full" required/> <!></div> <!> <button type="submit" class="btn w-full border-0 bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600"><!></button></form> <div class="space-y-2 text-center"><!> <!></div></div>'),ra=O("<div> </div>"),sa=O('<div class="space-y-6"><!> <!></div>');function aa(s,e){Ve(e,!1);const[t,r]=ot(),a=()=>ie(V,"$email",t),n=()=>ie(L,"$password",t),i=()=>ie(b,"$isRegistering",t),o=()=>ie(M,"$displayName",t),d=()=>ie(P,"$confirmPassword",t),c=()=>ie(g,"$isLoading",t),f=()=>ie(S,"$resetEmail",t),m=()=>ie(y,"$showForgotPassword",t),u=()=>ie(E,"$message",t),T=()=>ie(U,"$messageType",t),b=X(!0),g=X(!1),y=X(!1),V=X(""),L=X(""),P=X(""),M=X(""),S=X(""),E=X(""),U=X("error");function l(){b.update($=>!$),C()}function v(){y.set(!0),C()}function A(){y.set(!1),C()}function C(){V.set(""),L.set(""),P.set(""),M.set(""),S.set(""),E.set("")}function k(){E.set("")}function w($,W="error"){E.set($),U.set(W)}function B(){if(!a()||!n())return w("Please fill in all required fields"),!1;if(!_e.isValidEmail(a()))return w("Please enter a valid email address"),!1;const $=_e.isValidPassword(n());if(!$.valid)return w($.message||"Invalid password"),!1;if(i()){if(!o()?.trim())return w("Please enter your name"),!1;if(n()!==d())return w("Passwords do not match"),!1}return!0}async function J(){if(!c()&&(k(),!!B())){g.set(!0);try{i()?(await _e.register(a(),n(),o()),w("Account created successfully! You are now signed in.","success")):(await _e.signIn(a(),n()),w("Signed in successfully!","success"))}catch($){w($.message||"An error occurred. Please try again.")}finally{g.set(!1)}}}async function Z(){if(!c()){if(k(),!f()){w("Please enter your email address");return}if(!_e.isValidEmail(f())){w("Please enter a valid email address");return}g.set(!0);try{await _e.resetPassword(f()),w("Password reset email sent! Check your inbox.","success"),S.set("")}catch($){w($.message||"Failed to send password reset email")}finally{g.set(!1)}}}Oe();var q=sa(),z=p(q);{var K=$=>{var W=Ks(),G=_(p(W),2),ee=p(G),ge=_(p(ee),2);Te(ge),h(ee);var te=_(ee,2),fe=p(te);{var oe=ce=>{var Le=qs();he(),I(ce,Le)},we=ce=>{var Le=zs();he(),I(ce,Le)};H(fe,ce=>{c()?ce(oe):ce(we,!1)})}h(te);var be=_(te,2);h(G),h(W),j(()=>{ge.disabled=c(),te.disabled=c(),be.disabled=c()}),Ae(ge,f,ce=>Me(S,ce)),F("input",ge,k),F("click",te,Z),F("click",be,A),I($,W)},ue=$=>{var W=ta(),G=p(W),ee=p(G),ge=p(ee,!0);h(ee);var te=_(ee,2),fe=p(te,!0);h(te),h(G);var oe=_(G,2);{var we=D=>{var R=Gs(),Y=p(R),ve=_(p(Y));h(Y),h(R),j(()=>ve.disabled=c()),F("click",ve,l),I(D,R)};H(oe,D=>{i()||D(we)})}var be=_(oe,2),ce=p(be);{var Le=D=>{var R=Ys(),Y=_(p(R),2);Te(Y),h(R),j(()=>Y.disabled=c()),Ae(Y,o,ve=>Me(M,ve)),F("input",Y,k),I(D,R)};H(ce,D=>{i()&&D(Le)})}var We=_(ce,2),Re=_(p(We),2);Te(Re),h(We);var Be=_(We,2),Se=_(p(Be),2);Te(Se);var Wt=_(Se,2);{var Bt=D=>{var R=Js();I(D,R)};H(Wt,D=>{i()&&D(Bt)})}h(Be);var dt=_(Be,2);{var qt=D=>{var R=Xs(),Y=_(p(R),2);Te(Y),h(R),j(()=>Y.disabled=c()),Ae(Y,d,ve=>Me(P,ve)),F("input",Y,k),I(D,R)};H(dt,D=>{i()&&D(qt)})}var qe=_(dt,2),zt=p(qe);{var Kt=D=>{var R=Qs(),Y=_(ke(R));j(()=>se(Y,` ${i()?"Creating Account...":"Signing In..."}`)),I(D,R)},Gt=D=>{var R=Er();j(()=>se(R,i()?"Create Account":"Sign In")),I(D,R)};H(zt,D=>{c()?D(Kt):D(Gt,!1)})}h(qe),h(be);var ut=_(be,2),ft=p(ut);{var Yt=D=>{var R=Zs();j(()=>R.disabled=c()),F("click",R,v),I(D,R)};H(ft,D=>{i()||D(Yt)})}var Jt=_(ft,2);{var Xt=D=>{var R=ea(),Y=_(ke(R),2),ve=_(p(Y));h(Y),j(()=>ve.disabled=c()),F("click",ve,l),I(D,R)};H(Jt,D=>{i()&&D(Xt)})}h(ut),h(W),j(()=>{se(ge,i()?"Create Account":"Sign In"),se(fe,i()?"Create your FotoTV account to get started":"Welcome back! Please sign in to continue"),Re.disabled=c(),Se.disabled=c(),qe.disabled=c()}),Ae(Re,a,D=>Me(V,D)),F("input",Re,k),Ae(Se,n,D=>Me(L,D)),F("input",Se,k),F("submit",be,ts(J)),I($,W)};H(z,$=>{m()?$(K):$(ue,!1)})}var pe=_(z,2);{var me=$=>{var W=ra(),G=p(W,!0);h(W),j(()=>{Ce(W,1,`rounded-lg p-3 text-center text-sm ${T()==="error"?"border border-red-200 bg-red-50 text-red-600":"border border-green-200 bg-green-50 text-green-600"}`),se(G,u())}),I($,W)};H(pe,$=>{u()&&$(me)})}h(q),I(s,q),$e(),r()}var na=O(`<div class="space-y-6"><div class="bg-opacity-10 rounded-lg bg-white p-4"><p class="text-sm text-blue-200">To sign in on your TV, you'll need to approve the login from a device where you're
						already signed in.</p></div> <div class="flex flex-col items-center justify-center space-y-4"><span class="loading loading-spinner loading-lg text-white"></span> <p class="text-blue-200">Starting TV authentication...</p></div></div>`),ia=O(`<div class="space-y-6"><div class="bg-opacity-10 rounded-lg bg-white p-4"><p class="text-sm text-blue-200">To sign in on your TV, you'll need to approve the login from a device where you're
						already signed in.</p></div> <div class="alert alert-error"><span> </span></div> <button class="btn btn-primary btn-lg w-full text-lg">Try Again</button></div>`),oa=O('<div class="flex h-16 w-16 items-center justify-center rounded-lg bg-white text-3xl font-bold text-black"> </div>'),ca=O('<p class="text-sm text-blue-300">Code expires in: <span class="font-mono font-bold"> </span></p>'),la=O('<div class="space-y-6"><div class="text-center"><p class="mb-4 text-blue-200">Enter this code on your signed-in device:</p> <div class="mx-auto mb-4 inline-flex space-x-2"></div> <!></div> <div class="bg-opacity-10 rounded-lg bg-white p-4"><div class="flex items-center justify-center space-x-2"><span class="animate-pulse text-2xl">â³</span> <span class="text-blue-200">Waiting for approval from your phone...</span></div></div> <div class="space-y-2 text-left text-sm text-blue-200"><p class="font-semibold">How to approve:</p> <ol class="ml-4 list-inside list-decimal space-y-1"><li>Open PhotoTV on your phone</li> <li>Go to "Approve TV Login" section</li> <li>Enter the code: <span class="font-mono font-bold text-white"> </span></li> <li>Tap "Approve TV Login" to sign in</li></ol></div> <button class="btn btn-ghost btn-sm w-full">Cancel</button></div>'),da=O('<button class="btn btn-primary btn-lg w-full">Try Again</button>'),ua=O('<div class="space-y-6"><div class="text-center"><div class="mb-4 text-6xl"> </div> <p class="text-lg"> </p></div> <!></div>'),fa=O(`<div class="flex min-h-screen flex-col items-center justify-center p-8"><div class="bg-opacity-10 w-full max-w-md rounded-2xl bg-white p-8 text-center text-white shadow-xl backdrop-blur-lg"><div class="mb-8"><div class="bg-opacity-20 mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-white"><span class="text-2xl">ðº</span></div> <h1 class="text-2xl font-bold">TV Sign In</h1> <p class="mt-2 text-blue-200">Simple authentication for your TV</p></div> <!> <div class="border-opacity-20 mt-8 border-t border-white pt-6"><p class="text-xs text-blue-300">Make sure you're signed in on your phone or tablet first</p></div></div></div>`);function va(s,e){Ve(e,!1);let t=Fe(e,"onLoginSuccess",8,()=>{}),r=ae(""),a=ae("idle"),n=ae(""),i=ae(!1),o=ae(""),d=null,c=null,f=null;Ct(()=>{d=ye.authCode.subscribe(E=>{N(r,E||"")}),c=ye.authStatus.subscribe(E=>{N(a,E),E==="waiting"&&x(r)?m():u()}),T()}),Zt(()=>{d&&d(),c&&c(),u()});function m(){f&&clearInterval(f),f=setInterval(()=>{if(x(r)){const E=Date.now()-1e3,U=Math.max(0,5*60*1e3-(Date.now()-E)),l=Math.floor(U/6e4),v=Math.floor(U%6e4/1e3);N(n,`${l}:${v.toString().padStart(2,"0")}`)}},1e3)}function u(){f&&(clearInterval(f),f=null)}async function T(){N(i,!0),N(o,"");try{const E=await ye.requestTVAuth();E.success&&E.user?t()(E.user):E.error&&N(o,E.error)}catch{N(o,"Failed to start TV authentication")}finally{N(i,!1)}}function b(){ye.cancelTVAuth(),u(),N(o,"")}function g(){switch(x(a)){case"waiting":return"Waiting for approval from your phone...";case"approved":return"Login approved! Welcome to PhotoTV!";case"denied":return"Authentication was denied. Please try again.";case"expired":return"Code expired. Please generate a new code.";default:return""}}function y(){switch(x(a)){case"waiting":return"â³";case"approved":return"â";case"denied":return"â";case"expired":return"â°";default:return""}}Oe();var V=fa(),L=p(V),P=_(p(L),2);{var M=E=>{var U=na();I(E,U)},S=E=>{var U=rt(),l=ke(U);{var v=C=>{var k=ia(),w=_(p(k),2),B=p(w),J=p(B);h(B),h(w);var Z=_(w,2);h(k),j(()=>se(J,`â ${x(o)??""}`)),F("click",Z,T),I(C,k)},A=C=>{var k=rt(),w=ke(k);{var B=Z=>{var q=la(),z=p(q),K=_(p(z),2);Qr(K,5,()=>(x(r),Ee(()=>x(r).split(""))),Jr,(te,fe)=>{var oe=oa(),we=p(oe,!0);h(oe),j(()=>se(we,x(fe))),I(te,oe)}),h(K);var ue=_(K,2);{var pe=te=>{var fe=ca(),oe=_(p(fe)),we=p(oe,!0);h(oe),h(fe),j(()=>se(we,x(n))),I(te,fe)};H(ue,te=>{x(n)&&te(pe)})}h(z);var me=_(z,4),$=_(p(me),2),W=_(p($),4),G=_(p(W)),ee=p(G,!0);h(G),h(W),he(2),h($),h(me);var ge=_(me,2);h(q),j(()=>se(ee,x(r))),F("click",ge,b),I(Z,q)},J=Z=>{var q=ua(),z=p(q),K=p(z),ue=p(K,!0);h(K);var pe=_(K,2),me=p(pe,!0);h(pe),h(z);var $=_(z,2);{var W=G=>{var ee=da();F("click",ee,T),I(G,ee)};H($,G=>{(x(a)==="denied"||x(a)==="expired")&&G(W)})}h(q),j((G,ee)=>{se(ue,G),se(me,ee)},[()=>Ee(y),()=>Ee(g)]),I(Z,q)};H(w,Z=>{x(a)==="waiting"&&x(r)?Z(B):Z(J,!1)},!0)}I(C,k)};H(l,C=>{x(a)==="idle"&&x(o)?C(v):C(A,!1)},!0)}I(E,U)};H(P,E=>{x(i)&&x(a)==="idle"&&!x(o)?E(M):E(S,!1)})}he(2),h(L),h(V),I(s,V),$e()}var ha=O('<div class="avatar"><div class="h-8 w-8 rounded-full ring ring-orange-500 ring-offset-1 ring-offset-white"><img alt="User avatar"/></div></div>'),pa=O('<div class="flex h-8 w-8 items-center justify-center rounded-full bg-orange-500 ring ring-orange-500 ring-offset-1 ring-offset-white"><span class="text-sm font-semibold text-white"> </span></div>'),ga=O('<div class="absolute top-4 right-4 z-10 flex items-center space-x-2"><!> <div class="text-sm text-gray-800"><span class="font-semibold"> </span></div> <button class="btn btn-sm ml-2 border-white bg-white text-gray-700 hover:bg-gray-100">Logout</button></div>'),ma=O('<div class="relative flex min-h-screen flex-col items-center justify-center bg-gradient-to-br from-orange-100 to-red-100 p-4"><!> <div><div class="flex items-center space-x-3"><img src="/FotoTV-logo2.png" alt="FotoTV Logo"/> <div class="flex items-center space-x-2"><h1>FotoTV</h1></div></div></div> <div class="w-full max-w-md"><!></div></div>');function Ca(s,e){Ve(e,!1);const[t,r]=ot(),a=()=>ie(i,"$user",t),n=()=>ie(o,"$uploadedImages",t),i=X(null),o=X([]);let d=ae(!1),c=ae(!1);Ct(()=>(N(c,Ft()),Nt().then(v=>{N(d,v)}).catch(v=>{console.warn("Failed to detect TV device:",v)}),zr(re,async v=>{if(i.set(v),v){const A=await Vt.loadUserImages(v);o.set(A)}else o.set([])})));function f(){Kr(re).catch(()=>{})}function m(l){i.set(l)}Oe();var u=ma(),T=p(u);{var b=l=>{var v=ga(),A=p(v);{var C=q=>{var z=ha(),K=p(z),ue=p(K);h(K),h(z),j(()=>Gr(ue,"src",a().photoURL)),I(q,z)},k=q=>{var z=pa(),K=p(z),ue=p(K,!0);h(K),h(z),j(pe=>se(ue,pe),[()=>a().displayName?a().displayName.charAt(0).toUpperCase():a().email?.charAt(0).toUpperCase()||"U"]),I(q,z)};H(A,q=>{a().photoURL?q(C):q(k,!1)})}var w=_(A,2),B=p(w),J=p(B,!0);h(B),h(w);var Z=_(w,2);h(v),j(()=>se(J,a().displayName||a().email)),F("click",Z,f),I(l,v)};H(T,l=>{a()&&l(b)})}var g=_(T,2),y=p(g),V=p(y),L=_(V,2),P=p(L);h(L),h(y),h(g);var M=_(g,2),S=p(M);{var E=l=>{Bs(l,{get user(){return a()},get uploadedImages(){return n()}})},U=l=>{var v=rt(),A=ke(v);{var C=w=>{va(w,{onLoginSuccess:m})},k=w=>{aa(w,{})};H(A,w=>{x(d)||x(c)?w(C):w(k,!1)},!0)}I(l,v)};H(S,l=>{a()?l(E):l(U,!1)})}h(M),h(u),j(()=>{Ce(g,1,`${a()?"absolute top-4 left-4":"absolute top-8 left-1/2 -translate-x-1/2 transform"} z-10`),Ce(V,1,`${a()?"h-8":"h-16"} w-auto`),Ce(P,1,`${a()?"text-lg":"text-3xl"} font-bold text-gray-800`)}),I(s,u),$e(),r()}export{$t as W,Ca as _};

import"../chunks/NZTpNUN0.js";import{i as Ne}from"../chunks/TJtffnvd.js";import{q as pe,u as pt,am as at,l as bt,an as He,H as wt,w as yt,x as _t,y as We,U as Ge,ao as Ce,ap as Ye,m as be,A as $e,Z as xt,G as It,aq as Ze,ar as Je,as as Qe,I as Tt,D as Xe,F as Ae,ai as Ut,at as Vt,B as fe,L as Pt,Y as kt,p as ze,au as Et,av as Ct,f as p,j as Fe,h as c,d as i,r as l,t as U,e as C,b as g,c as qe,g as te,n as xe,aw as st,O as $t,s as Me,W as Q,k as At,o as St}from"../chunks/CBnVU58R.js";import{i as P}from"../chunks/BQhsO-oj.js";import{r as rt,s as ot,l as Dt,g as nt,u as Lt,c as Rt,a as W,e as Ft,f as Mt,h as Nt,i as ge,o as zt,j as qt,b as Kt}from"../chunks/BltK51CL.js";import{g as Bt,s as ie,c as et}from"../chunks/DvHRCJck.js";import{p as tt,b as jt,s as M,a as Ke,c as me}from"../chunks/BaW7rXmQ.js";import{w as S}from"../chunks/B95rLLmU.js";import{g as Ot}from"../chunks/C9krRrN2.js";const Se=0,_e=1,De=2;function Ht(n,e,t,s,a){pe&&pt();var r=n,o=at(),y=Tt,v=Ge,u,k,q,N=o?Ye(void 0):be(void 0,!1,!1),G=o?Ye(void 0):be(void 0,!1,!1),$=!1;function _(I,E){$=!0,E&&(Ze(K),Je(K),Qe(y));try{I===Se&&t&&(u?Xe(u):u=$e(()=>t(r))),I===_e&&s&&(k?Xe(k):k=$e(()=>s(r,N))),I!==Se&&u&&Ae(u,()=>u=null),I!==_e&&k&&Ae(k,()=>k=null),I!==De&&q&&Ae(q,()=>q=null)}finally{E&&(Qe(null),Je(null),Ze(null),Ut())}}var K=bt(()=>{if(v===(v=e()))return;let I=pe&&He(v)===(r.data===wt);if(I&&(r=yt(),_t(r),We(!1),I=!0),He(v)){var E=v;$=!1,E.then(B=>{E===v&&(Ce(N,B),_(_e,!0))},B=>{if(E===v)throw Ce(G,B),_(De,!0),G.v}),pe?t&&(u=$e(()=>t(r))):xt(()=>{$||_(Se,!0)})}else Ce(N,v),_(_e,!1);return I&&We(!0),()=>v=Ge});pe&&(r=It)}function he(n,e,t=e){var s=at(),a=new WeakSet;Vt(n,"input",r=>{var o=r?n.defaultValue:n.value;if(o=Le(n)?Re(o):o,t(o),fe!==null&&a.add(fe),s&&o!==(o=e())){var y=n.selectionStart,v=n.selectionEnd;n.value=o??"",v!==null&&(n.selectionStart=y,n.selectionEnd=Math.min(v,n.value.length))}}),(pe&&n.defaultValue!==n.value||Pt(e)==null&&n.value)&&(t(Le(n)?Re(n.value):n.value),fe!==null&&a.add(fe)),kt(()=>{var r=e();n===document.activeElement&&a.has(fe)||Le(n)&&r===Re(n.value)||n.type==="date"&&!r&&!n.value||r!==n.value&&(n.value=r??"")})}function Le(n){var e=n.type;return e==="number"||e==="range"}function Re(n){return n===""?null:+n}function Wt(n){return function(...e){var t=e[0];return t.preventDefault(),n?.apply(this,e)}}class it{static async loadUserImages(e){if(!e)return[];try{const t=rt(ot,`images/${e.uid}`),a=(await Dt(t)).items.sort((o,y)=>o.name.localeCompare(y.name));return await Promise.all(a.map(async o=>await nt(o)))}catch(t){return console.error("Error loading images:",t),[]}}static async loadUserImagesWithRetry(e,t=0,s=3){if(!e)return[];let a=0,r=[];for(;a<s&&(a>0&&await new Promise(o=>setTimeout(o,500*a)),r=await this.loadUserImages(e),!(r.length>t));)a++;return r}}class Ie{static cachedDeviceInfo=null;static cacheTime=0;static CACHE_DURATION=5e3;static async getCachedDeviceInfo(){const e=Date.now();return(!this.cachedDeviceInfo||e-this.cacheTime>this.CACHE_DURATION)&&(this.cachedDeviceInfo=await Bt(),this.cacheTime=e),this.cachedDeviceInfo}static async shouldUseTVUI(){return(await this.getCachedDeviceInfo()).shouldUseTVUI}static async getTVClasses(e,t){return await this.shouldUseTVUI()?t:e}static async getSpacingClasses(){return await this.shouldUseTVUI()?"p-8 gap-8":"p-4 gap-4"}static async getTextSizeClasses(){return await this.shouldUseTVUI()?"text-2xl":"text-base"}static async getButtonClasses(){return await this.shouldUseTVUI()?"btn-lg px-8 py-4 text-xl min-h-16":"btn-md px-4 py-2 text-base min-h-12"}static async getGridClasses(){return await this.shouldUseTVUI()?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4"}static async hasPhysicalKeyboard(){return(await this.getCachedDeviceInfo()).hasPhysicalKeyboard}static async isTouchDevice(){return(await this.getCachedDeviceInfo()).isTouchDevice}static async getFocusClasses(){const e=await this.shouldUseTVUI(),t=await this.hasPhysicalKeyboard();return e||t?"focus:ring-4 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-black":"focus:ring-2 focus:ring-blue-300"}static setupKeyboardNavigation(e){const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');let s=0;const a=r=>{switch(r.key){case"ArrowDown":r.preventDefault(),s=Math.min(s+1,t.length-1),t[s].focus();break;case"ArrowUp":r.preventDefault(),s=Math.max(s-1,0),t[s].focus();break;case"ArrowRight":r.preventDefault(),s=Math.min(s+1,t.length-1),t[s].focus();break;case"ArrowLeft":r.preventDefault(),s=Math.max(s-1,0),t[s].focus();break;case"Enter":case" ":r.preventDefault(),t[s].click();break}};return e.addEventListener("keydown",a),()=>{e.removeEventListener("keydown",a)}}static createTVUIStore(){let e=!1,t=!0;const s=new Set,a=async()=>{try{e=await this.shouldUseTVUI()}catch(o){console.warn("Failed to update TV UI state:",o)}finally{t=!1;const o={isTVUI:e,isLoading:t};s.forEach(y=>y(o))}};a();const r=()=>{this.cachedDeviceInfo=null,a()};return window.addEventListener("resize",r),window.addEventListener("orientationchange",r),{subscribe:o=>(s.add(o),o({isTVUI:e,isLoading:t}),()=>{s.delete(o),s.size===0&&(window.removeEventListener("resize",r),window.removeEventListener("orientationchange",r))}),get:()=>({isTVUI:e,isLoading:t})}}static async getImageLoadingStrategy(){return await this.shouldUseTVUI()?"eager":"lazy"}static async getImageSizes(){switch((await this.getCachedDeviceInfo()).screenType){case"tv":return"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw";case"desktop":return"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 25vw";case"tablet":return"(max-width: 768px) 100vw, 50vw";case"mobile":default:return"100vw"}}static async shouldShowVirtualKeyboard(){const e=await this.getCachedDeviceInfo();return e.isTV&&!e.hasPhysicalKeyboard}static async getModalClasses(){return await this.shouldUseTVUI()?"modal-middle max-w-4xl w-11/12 max-h-[80vh]":"modal-bottom sm:modal-middle max-w-lg w-11/12"}static async getTVPlatform(){const e=await this.getCachedDeviceInfo();if(!e.isTV)return null;const t=navigator.userAgent.toLowerCase(),s=e.deviceInfo?.model?.toLowerCase()||"",a=e.deviceInfo?.manufacturer?.toLowerCase()||"";return t.includes("googletv")||s.includes("chromecast")?"google-tv":a.includes("nvidia")||s.includes("shield")?"nvidia-shield":a.includes("sony")||s.includes("bravia")?"sony-tv":t.includes("android tv")?"android-tv":"unknown-tv"}static async optimizeForTV(){await this.shouldUseTVUI()?(document.documentElement.style.setProperty("--tv-safe-area-top","48px"),document.documentElement.style.setProperty("--tv-safe-area-bottom","48px"),document.documentElement.style.setProperty("--tv-safe-area-left","48px"),document.documentElement.style.setProperty("--tv-safe-area-right","48px"),document.body.classList.add("tv-device")):document.body.classList.remove("tv-device")}}const Gt=()=>Ie.hasPhysicalKeyboard(),Yt=(n,e)=>Ie.getTVClasses(n,e),Zt=Ie.createTVUIStore();typeof window<"u"&&Ie.optimizeForTV();var Jt=p('<span class="loading loading-spinner loading-sm"></span> Uploading...',1),Qt=st('<svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> Upload Photo',1),Xt=p('<input type="file" accept="image/*" class="hidden"/> <div class="flex flex-col items-center space-y-4"><button class="btn w-full border-orange-500 bg-orange-500 text-white hover:bg-orange-600"><!></button> <button class="btn w-full border-red-500 bg-red-500 text-white hover:bg-red-600"><svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> Slideshow</button></div>',1);function ea(n,e){ze(e,!1);const[t,s]=Ke(),a=()=>M(y,"$uploading",t);let r=tt(e,"user",8),o=tt(e,"uploadedImages",12);const y=S(!1),v=S(o());v.subscribe(x=>{o(x)});let u=be();function k(){te(u)?.click()}async function q(x){const D=x.target,Y=D.files;if(!(!Y||Y.length===0||!r())){y.set(!0);try{const Z=Y[0];if(!Z.type.startsWith("image/")){alert("Please select an image file");return}const b=Date.now(),L=`${r().uid}/${b}_${Z.name}`,V=rt(ot,`images/${L}`),j=await Lt(V,Z),R=await nt(j.ref);v.set([...o(),R]);const m=await it.loadUserImagesWithRetry(r(),o().length-1);v.set(m)}catch(Z){console.error("Upload failed:",Z),alert("Upload failed. Please try again.")}finally{y.set(!1),D.value=""}}}Et(()=>$t(o()),()=>{v.set(o())}),Ct(),Ne();var N=Xt(),G=Fe(N);jt(G,x=>Me(u,x),()=>te(u));var $=c(G,2),_=i($),K=i(_);{var I=x=>{var D=Jt();xe(),g(x,D)},E=x=>{var D=Qt();xe(),g(x,D)};P(K,x=>{a()?x(I):x(E,!1)})}l(_);var B=c(_,2);l($),U(()=>_.disabled=a()),C("change",G,q),C("click",_,k),C("click",B,()=>Ot("/slideshow")),g(n,N),qe(),s()}class de{static async register(e,t,s){try{const r=(await Rt(W,e,t)).user;return s&&await Ft(r,{displayName:s}),console.log("User registered successfully:",r.uid),r}catch(a){console.error("Registration error:",a);const r=a;throw new Error(this.getErrorMessage(r.code))}}static async signIn(e,t){try{const s=await Mt(W,e,t);return console.log("User signed in successfully:",s.user.uid),s.user}catch(s){console.error("Sign in error:",s);const a=s;throw new Error(this.getErrorMessage(a.code))}}static async resetPassword(e){try{await Nt(W,e),console.log("Password reset email sent to:",e)}catch(t){console.error("Password reset error:",t);const s=t;throw new Error(this.getErrorMessage(s.code))}}static async signOut(){try{await W.signOut(),console.log("User signed out successfully")}catch(e){throw console.error("Sign out error:",e),e}}static getCurrentUser(){return W.currentUser}static async getCurrentUserAsync(){return new Promise(e=>{const t=W.onAuthStateChanged(s=>{t(),e(s)})})}static isSignedIn(){return!!W.currentUser}static async getAuthToken(){try{const e=W.currentUser;return e?await e.getIdToken():null}catch(e){return console.error("Error getting auth token:",e),null}}static async refreshAuthToken(){try{const e=W.currentUser;return e?await e.getIdToken(!0):null}catch(e){return console.error("Error refreshing auth token:",e),null}}static getErrorMessage(e){switch(e){case"auth/email-already-in-use":return"This email address is already registered. Please use a different email or try signing in.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/operation-not-allowed":return"Email/password accounts are not enabled. Please contact support.";case"auth/weak-password":return"Password should be at least 6 characters long.";case"auth/user-disabled":return"This account has been disabled. Please contact support.";case"auth/user-not-found":return"No account found with this email address. Please check your email or create a new account.";case"auth/wrong-password":return"Incorrect password. Please try again or reset your password.";case"auth/invalid-credential":return"Invalid email or password. Please check your credentials and try again.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later or reset your password.";case"auth/network-request-failed":return"Network error. Please check your internet connection and try again.";default:return"An error occurred during authentication. Please try again."}}static isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}static isValidPassword(e){return e.length<6?{valid:!1,message:"Password must be at least 6 characters long"}:{valid:!0}}}var ta=p('<span class="loading loading-spinner loading-sm mr-2"></span> Sending...',1),aa=st('<svg class="mr-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg> Send Reset Email',1),sa=p(`<div class="space-y-4"><div class="text-center"><h2 class="text-2xl font-bold text-gray-800">Reset Password</h2> <p class="mt-2 text-sm text-gray-600">Enter your email address and we'll send you a link to reset your password</p></div> <div class="space-y-4"><div><label for="reset-email" class="mb-1 block text-sm font-medium text-gray-700">Email Address</label> <input id="reset-email" type="email" placeholder="Enter your email" class="input input-bordered w-full"/></div> <button class="btn w-full border-0 bg-blue-500 text-white hover:bg-blue-600"><!></button> <button class="btn btn-ghost w-full text-gray-600">Back to Sign In</button></div></div>`),ra=p(`<div class="text-center"><p class="text-sm text-gray-600">Don't have an account? <button class="ml-1 font-semibold text-orange-600 underline hover:text-orange-700">Create Account</button></p></div>`),oa=p('<div><label for="display-name" class="mb-1 block text-sm font-medium text-gray-700">Display Name</label> <input id="display-name" type="text" placeholder="Name to display" class="input input-bordered w-full" required/></div>'),na=p('<p class="mt-1 text-xs text-gray-500">Password must be at least 6 characters long</p>'),ia=p('<div><label for="confirm-password" class="mb-1 block text-sm font-medium text-gray-700">Confirm Password</label> <input id="confirm-password" type="password" placeholder="Confirm your password" class="input input-bordered w-full" required/></div>'),la=p('<span class="loading loading-spinner loading-sm mr-2"></span> ',1),ca=p('<button class="text-sm text-blue-600 underline hover:text-blue-700">Forgot your password?</button>'),da=p('<div class="flex items-center"><div class="flex-1 border-t border-gray-300"></div> <span class="px-3 text-sm text-gray-500">or</span> <div class="flex-1 border-t border-gray-300"></div></div> <p class="text-sm text-gray-600">Already have an account? <button class="ml-1 text-blue-600 underline hover:text-blue-700">Sign In</button></p>',1),ua=p('<div class="space-y-4"><div class="text-center"><h2 class="text-2xl font-bold text-gray-800"> </h2> <p class="mt-2 text-sm text-gray-600"> </p></div> <!> <form class="space-y-4"><!> <div><label for="email" class="mb-1 block text-sm font-medium text-gray-700">Email Address</label> <input id="email" type="email" placeholder="Enter your email" class="input input-bordered w-full" required/></div> <div><label for="password" class="mb-1 block text-sm font-medium text-gray-700">Password</label> <input id="password" type="password" placeholder="Enter your password" class="input input-bordered w-full" required/> <!></div> <!> <button type="submit" class="btn w-full border-0 bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600"><!></button></form> <div class="space-y-2 text-center"><!> <!></div></div>'),va=p("<div> </div>"),fa=p('<div class="space-y-6"><!> <!></div>');function ga(n,e){ze(e,!1);const[t,s]=Ke(),a=()=>M(I,"$email",t),r=()=>M(E,"$password",t),o=()=>M($,"$isRegistering",t),y=()=>M(x,"$displayName",t),v=()=>M(B,"$confirmPassword",t),u=()=>M(_,"$isLoading",t),k=()=>M(D,"$resetEmail",t),q=()=>M(K,"$showForgotPassword",t),N=()=>M(Y,"$message",t),G=()=>M(Z,"$messageType",t),$=S(!0),_=S(!1),K=S(!1),I=S(""),E=S(""),B=S(""),x=S(""),D=S(""),Y=S(""),Z=S("error");function b(){$.update(h=>!h),j()}function L(){K.set(!0),j()}function V(){K.set(!1),j()}function j(){I.set(""),E.set(""),B.set(""),x.set(""),D.set(""),Y.set("")}function R(){Y.set("")}function m(h,w="error"){Y.set(h),Z.set(w)}function J(){if(!a()||!r())return m("Please fill in all required fields"),!1;if(!de.isValidEmail(a()))return m("Please enter a valid email address"),!1;const h=de.isValidPassword(r());if(!h.valid)return m(h.message||"Invalid password"),!1;if(o()){if(!y()?.trim())return m("Please enter your name"),!1;if(r()!==v())return m("Passwords do not match"),!1}return!0}async function se(){if(!u()&&(R(),!!J())){_.set(!0);try{o()?(await de.register(a(),r(),y()),m("Account created successfully! You are now signed in.","success")):(await de.signIn(a(),r()),m("Signed in successfully!","success"))}catch(h){m(h.message||"An error occurred. Please try again.")}finally{_.set(!1)}}}async function re(){if(!u()){if(R(),!k()){m("Please enter your email address");return}if(!de.isValidEmail(k())){m("Please enter a valid email address");return}_.set(!0);try{await de.resetPassword(k()),m("Password reset email sent! Check your inbox.","success"),D.set("")}catch(h){m(h.message||"Failed to send password reset email")}finally{_.set(!1)}}}Ne();var z=fa(),A=i(z);{var O=h=>{var w=sa(),F=c(i(w),2),X=i(F),ce=c(i(X),2);ge(ce),l(X);var ae=c(X,2),Ue=i(ae);{var we=H=>{var ue=ta();xe(),g(H,ue)},Ve=H=>{var ue=aa();xe(),g(H,ue)};P(Ue,H=>{u()?H(we):H(Ve,!1)})}l(ae);var ne=c(ae,2);l(F),l(w),U(()=>{ce.disabled=u(),ae.disabled=u(),ne.disabled=u()}),he(ce,k,H=>me(D,H)),C("input",ce,R),C("click",ae,re),C("click",ne,V),g(h,w)},oe=h=>{var w=ua(),F=i(w),X=i(F),ce=i(X,!0);l(X);var ae=c(X,2),Ue=i(ae,!0);l(ae),l(F);var we=c(F,2);{var Ve=d=>{var f=ra(),T=i(f),ee=c(i(T));l(T),l(f),U(()=>ee.disabled=u()),C("click",ee,b),g(d,f)};P(we,d=>{o()||d(Ve)})}var ne=c(we,2),H=i(ne);{var ue=d=>{var f=oa(),T=c(i(f),2);ge(T),l(f),U(()=>T.disabled=u()),he(T,y,ee=>me(x,ee)),C("input",T,R),g(d,f)};P(H,d=>{o()&&d(ue)})}var Pe=c(H,2),ye=c(i(Pe),2);ge(ye),l(Pe);var ke=c(Pe,2),ve=c(i(ke),2);ge(ve);var lt=c(ve,2);{var ct=d=>{var f=na();g(d,f)};P(lt,d=>{o()&&d(ct)})}l(ke);var Be=c(ke,2);{var dt=d=>{var f=ia(),T=c(i(f),2);ge(T),l(f),U(()=>T.disabled=u()),he(T,v,ee=>me(B,ee)),C("input",T,R),g(d,f)};P(Be,d=>{o()&&d(dt)})}var Ee=c(Be,2),ut=i(Ee);{var vt=d=>{var f=la(),T=c(Fe(f));U(()=>Q(T,` ${o()?"Creating Account...":"Signing In..."}`)),g(d,f)},ft=d=>{var f=At();U(()=>Q(f,o()?"Create Account":"Sign In")),g(d,f)};P(ut,d=>{u()?d(vt):d(ft,!1)})}l(Ee),l(ne);var je=c(ne,2),Oe=i(je);{var gt=d=>{var f=ca();U(()=>f.disabled=u()),C("click",f,L),g(d,f)};P(Oe,d=>{o()||d(gt)})}var mt=c(Oe,2);{var ht=d=>{var f=da(),T=c(Fe(f),2),ee=c(i(T));l(T),U(()=>ee.disabled=u()),C("click",ee,b),g(d,f)};P(mt,d=>{o()&&d(ht)})}l(je),l(w),U(()=>{Q(ce,o()?"Create Account":"Sign In"),Q(Ue,o()?"Create your FotoTV account to get started":"Welcome back! Please sign in to continue"),ye.disabled=u(),ve.disabled=u(),Ee.disabled=u()}),he(ye,a,d=>me(I,d)),C("input",ye,R),he(ve,r,d=>me(E,d)),C("input",ve,R),C("submit",ne,Wt(se)),g(h,w)};P(A,h=>{q()?h(O):h(oe,!1)})}var le=c(A,2);{var Te=h=>{var w=va(),F=i(w,!0);l(w),U(()=>{ie(w,1,`rounded-lg p-3 text-center text-sm ${G()==="error"?"border border-red-200 bg-red-50 text-red-600":"border border-green-200 bg-green-50 text-green-600"}`),Q(F,N())}),g(h,w)};P(le,h=>{N()&&h(Te)})}l(z),g(n,z),qe(),s()}var ma=p('<div class="avatar"><div class="h-8 w-8 rounded-full ring ring-orange-500 ring-offset-1 ring-offset-white"><img alt="User avatar"/></div></div>'),ha=p('<div class="flex h-8 w-8 items-center justify-center rounded-full bg-orange-500 ring ring-orange-500 ring-offset-1 ring-offset-white"><span class="text-sm font-semibold text-white"> </span></div>'),pa=p('<div class="absolute top-4 right-4 z-10 flex items-center space-x-2"><!> <div class="text-sm text-gray-800"><span class="font-semibold"> </span></div> <button class="btn btn-sm ml-2 border-white bg-white text-gray-700 hover:bg-gray-100">Logout</button></div>'),ba=p('<p class="text-gray-600">Loading device detection...</p>'),wa=p("<button> </button>"),ya=p('<button class="btn btn-sm">Demo Button</button>'),_a=p('<div class="space-y-2 text-sm"><p class="flex justify-between"><span>TV UI Mode:</span> <span> </span></p> <p class="flex justify-between"><span>Physical Keyboard:</span> <span> </span></p> <div class="mt-4"><!></div></div>'),xa=p('<div class="bg-opacity-80 mb-8 w-full max-w-md rounded-lg bg-white p-4 shadow-lg"><h2 class="mb-4 text-lg font-semibold text-gray-800">📺 TV Detection Demo</h2> <!></div>'),Ia=p('<div class="relative flex min-h-screen flex-col items-center justify-center bg-gradient-to-br from-orange-100 to-red-100 p-4"><!> <div><div class="flex items-center space-x-3"><img src="/FotoTV-logo2.png" alt="FotoTV Logo"/> <h1>FotoTV</h1></div></div> <!> <div class="w-full max-w-md"><!></div></div>');function Sa(n,e){ze(e,!1);const[t,s]=Ke(),a=()=>M(o,"$user",t),r=()=>M(y,"$uploadedImages",t),o=S(null),y=S([]);let v=be({isTVUI:!1,isLoading:!0}),u=be(!1);St(()=>{const b=zt(W,async V=>{if(o.set(V),V){const j=await it.loadUserImages(V);y.set(j)}else y.set([])}),L=Zt.subscribe(V=>{Me(v,V)});return Gt().then(V=>{Me(u,V)}),()=>{b(),L()}});function k(){qt(W).catch(console.error)}Ne();var q=Ia(),N=i(q);{var G=b=>{var L=pa(),V=i(L);{var j=z=>{var A=ma(),O=i(A),oe=i(O);l(O),l(A),U(()=>Kt(oe,"src",a().photoURL)),g(z,A)},R=z=>{var A=ha(),O=i(A),oe=i(O,!0);l(O),l(A),U(le=>Q(oe,le),[()=>a().displayName?a().displayName.charAt(0).toUpperCase():a().email?.charAt(0).toUpperCase()||"U"]),g(z,A)};P(V,z=>{a().photoURL?z(j):z(R,!1)})}var m=c(V,2),J=i(m),se=i(J,!0);l(J),l(m);var re=c(m,2);l(L),U(()=>Q(se,a().displayName||a().email)),C("click",re,k),g(b,L)};P(N,b=>{a()&&b(G)})}var $=c(N,2),_=i($),K=i(_),I=c(K,2);l(_),l($);var E=c($,2);{var B=b=>{var L=xa(),V=c(i(L),2);{var j=m=>{var J=ba();g(m,J)},R=m=>{var J=_a(),se=i(J),re=c(i(se),2),z=i(re,!0);l(re),l(se);var A=c(se,2),O=c(i(A),2),oe=i(O,!0);l(O),l(A);var le=c(A,2),Te=i(le);Ht(Te,()=>Yt("btn-sm px-3 py-1","btn-lg px-6 py-3 text-lg"),h=>{var w=ya();g(h,w)},(h,w)=>{var F=wa(),X=i(F,!0);l(F),U(()=>{ie(F,1,`btn btn-primary ${te(w)??""}`),Q(X,te(v).isTVUI?"📺 TV Button Style":"📱 Mobile Button Style")}),g(h,F)}),l(le),l(J),U(()=>{ie(re,1,et(te(v).isTVUI?"font-semibold text-green-600":"text-gray-500")),Q(z,te(v).isTVUI?"✓ Enabled":"✗ Disabled"),ie(O,1,et(te(u)?"font-semibold text-green-600":"text-orange-500")),Q(oe,te(u)?"⌨️ Available":"📱 Virtual Only")}),g(m,J)};P(V,m=>{te(v).isLoading?m(j):m(R,!1)})}l(L),g(b,L)};P(E,b=>{a()||b(B)})}var x=c(E,2),D=i(x);{var Y=b=>{ea(b,{get user(){return a()},get uploadedImages(){return r()}})},Z=b=>{ga(b,{})};P(D,b=>{a()?b(Y):b(Z,!1)})}l(x),l(q),U(()=>{ie($,1,`${a()?"absolute top-4 left-4":"absolute top-8 left-1/2 -translate-x-1/2 transform"} z-10`),ie(K,1,`${a()?"h-8":"h-16"} w-auto`),ie(I,1,`${a()?"text-lg":"text-3xl"} font-bold text-gray-800`)}),g(n,q),qe(),s()}export{Sa as component};
